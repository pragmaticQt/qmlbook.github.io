<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4. Quick Starter &#8212; Qt5 Cadaques Book vmaster</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom-styles.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Fluid Elements" href="../ch05-fluid/fluid.html" />
    <link rel="prev" title="3. Qt Creator IDE" href="../ch03-qtcreator/qtcreator.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QmlBook</a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Chapters <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ch01-meetqt/meetqt.html">1. Meet Qt 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch02-start/start.html">2. Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch03-qtcreator/qtcreator.html">3. Qt Creator IDE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Quick Starter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch05-fluid/fluid.html">5. Fluid Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch06-controls/controls.html">6. Qt Quick Controls 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch07-modelview/modelview.html">7. Model-View-Delegate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch08-felgo/felgo.html">8. Felgo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch09-canvas/canvas.html">9. Canvas Element</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch10-particles/particles.html">10. Particle Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch11-shaders/shaders.html">11. Shader Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch12-multimedia/multimedia.html">12. Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch13-networking/networking.html">13. Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch14-storage/storage.html">14. Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch15-dynamicqml/dynamicqml.html">15. Dynamic QML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch16-javascript/javascript.html">16. JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch17-qtcpp/qtcpp.html">17. Qt and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch18-extensions/extensions.html">18. Extending QML with C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch19-felgo-plugins/felgo-plugins.html">19. Felgo Plugins and QML Hot Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch20-python/python.html">20. Qt for Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">1. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/deployment.html">2. Deploying QML Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../draganddrop/draganddrop.html">3. Drag and Drop</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">4. Quick Starter</a><ul>
<li><a class="reference internal" href="#qml-syntax">4.1. QML Syntax</a><ul>
<li><a class="reference internal" href="#properties">4.1.1. Properties</a></li>
<li><a class="reference internal" href="#scripting">4.1.2. Scripting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-elements">4.2. Basic Elements</a><ul>
<li><a class="reference internal" href="#item-element">4.2.1. Item Element</a></li>
<li><a class="reference internal" href="#rectangle-element">4.2.2. Rectangle Element</a></li>
<li><a class="reference internal" href="#text-element">4.2.3. Text Element</a></li>
<li><a class="reference internal" href="#image-element">4.2.4. Image Element</a></li>
<li><a class="reference internal" href="#mousearea-element">4.2.5. MouseArea Element</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components">4.3. Components</a></li>
<li><a class="reference internal" href="#simple-transformations">4.4. Simple Transformations</a></li>
<li><a class="reference internal" href="#positioning-elements">4.5. Positioning Elements</a></li>
<li><a class="reference internal" href="#layout-items">4.6. Layout Items</a></li>
<li><a class="reference internal" href="#input-elements">4.7. Input Elements</a><ul>
<li><a class="reference internal" href="#textinput">4.7.1. TextInput</a></li>
<li><a class="reference internal" href="#focusscope">4.7.2. FocusScope</a></li>
<li><a class="reference internal" href="#textedit">4.7.3. TextEdit</a></li>
<li><a class="reference internal" href="#keys-element">4.7.4. Keys Element</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-techniques">4.8. Advanced Techniques</a><ul>
<li><a class="reference internal" href="#performance-of-qml">4.8.1. Performance of QML</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../ch03-qtcreator/qtcreator.html" title="Previous Chapter: 3. Qt Creator IDE"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 3. Qt Creator IDE</span>
    </a>
  </li>
  <li>
    <a href="../ch05-fluid/fluid.html" title="Next Chapter: 5. Fluid Elements"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">5. Fluid Elements &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">4. Quick Starter</a><ul>
<li><a class="reference internal" href="#qml-syntax">4.1. QML Syntax</a><ul>
<li><a class="reference internal" href="#properties">4.1.1. Properties</a></li>
<li><a class="reference internal" href="#scripting">4.1.2. Scripting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-elements">4.2. Basic Elements</a><ul>
<li><a class="reference internal" href="#item-element">4.2.1. Item Element</a></li>
<li><a class="reference internal" href="#rectangle-element">4.2.2. Rectangle Element</a></li>
<li><a class="reference internal" href="#text-element">4.2.3. Text Element</a></li>
<li><a class="reference internal" href="#image-element">4.2.4. Image Element</a></li>
<li><a class="reference internal" href="#mousearea-element">4.2.5. MouseArea Element</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components">4.3. Components</a></li>
<li><a class="reference internal" href="#simple-transformations">4.4. Simple Transformations</a></li>
<li><a class="reference internal" href="#positioning-elements">4.5. Positioning Elements</a></li>
<li><a class="reference internal" href="#layout-items">4.6. Layout Items</a></li>
<li><a class="reference internal" href="#input-elements">4.7. Input Elements</a><ul>
<li><a class="reference internal" href="#textinput">4.7.1. TextInput</a></li>
<li><a class="reference internal" href="#focusscope">4.7.2. FocusScope</a></li>
<li><a class="reference internal" href="#textedit">4.7.3. TextEdit</a></li>
<li><a class="reference internal" href="#keys-element">4.7.4. Keys Element</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-techniques">4.8. Advanced Techniques</a><ul>
<li><a class="reference internal" href="#performance-of-qml">4.8.1. Performance of QML</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="quick-starter">
<h1>4. Quick Starter<a class="headerlink" href="#quick-starter" title="Permalink to this headline">¶</a></h1>
<p><em>Section author: <a class="reference external" href="https://www.linkedin.com/in/jryannel">jryannel&#64;LinkedIn</a></em></p>
<p><div class="btn-group btn-group-justified" role="group"><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook/" target="_blank">Github</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//blob/master/docs/ch04-qmlstart/qmlstart.rst" target="_blank"><i class="glyphicon glyphicon-file"></i> View</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//edit/master/docs/ch04-qmlstart/qmlstart.rst" target="_blank"><i class="glyphicon glyphicon-pencil"></i> Edit</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues/new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23quick-starter" target="_blank"><i class="glyphicon glyphicon-plus"></i> Issue </a><a  class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues?labels=ch04&page=1&state=open" target="_blank"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Last Build: December 07, 2020 at 10:50 CET</p>
<p class="last">The source code for this chapter can be found in the <a class="reference external" href="../assets">assets folder</a>.</p>
</div>
<p>This chapter provides an overview of QML, the declarative user interface language used in Qt 5. We will discuss the QML syntax, which is a tree of elements, followed by an overview of the most important basic elements. Later we will briefly look at how to create our own elements, called components and how to transform elements using property manipulations. Towards the end, we will look at how to arrange elements together in a layout and finally have a look at elements where the user can provide input.</p>
<div class="section" id="qml-syntax">
<h2>4.1. QML Syntax<a class="headerlink" href="#qml-syntax" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23qml-syntax"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-0">QML is a declarative language used to describe the user interface of your application. It breaks down the user interface into smaller elements, which can be combined into components. QML describes the look and the behavior of these user interface elements. This user interface description can be enriched with JavaScript code to provide simple but also more complex logic. In this perspective, it follows the HTML-JavaScript pattern but QML is designed from the ground up to describe user interfaces, not text-documents.</p>
<p>In its simplest way, QML is a hierarchy of elements. Child elements inherit the coordinate system from the parent. An <code class="docutils literal notranslate"><span class="pre">x,y</span></code> coordinate is always relative to the parent.</p>
<div class="figure">
<img alt="../_images/scene1.png" src="../_images/scene1.png" />
</div>
<p>Let’s start with a simple example of a QML file to explain the different syntax.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// RectangleExample.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="c1">// The root element is the Rectangle</span>
<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="c1">// name this element root</span>
    <span class="kd">id: root</span>

    <span class="c1">// properties: &lt;name&gt;: &lt;value&gt;</span>
    <span class="k">width:</span> <span class="mi">120</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">240</span>

    <span class="c1">// color property</span>
    <span class="k">color:</span> <span class="s2">&quot;#4A4A4A&quot;</span>

    <span class="c1">// Declare a nested element (child of root)</span>
    <span class="nx">Image</span> <span class="p">{</span>
        <span class="kd">id: triangle</span>

        <span class="c1">// reference the parent</span>
        <span class="k">x:</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">width</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">40</span>

        <span class="k">source:</span> <span class="s1">&#39;assets/triangle_red.png&#39;</span>
    <span class="p">}</span>

    <span class="c1">// Another child of root</span>
    <span class="nx">Text</span> <span class="p">{</span>
        <span class="c1">// un-named element</span>

        <span class="c1">// reference element by id</span>
        <span class="k">y:</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="mi">20</span>

        <span class="c1">// reference root element</span>
        <span class="k">width:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span>

        <span class="k">color:</span> <span class="s1">&#39;white&#39;</span>
        <span class="k">horizontalAlignment:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">AlignHCenter</span>
        <span class="k">text:</span> <span class="s1">&#39;Triangle&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">import</span></code> statement imports a module in a specific version.</li>
<li>Comments can be made using <code class="docutils literal notranslate"><span class="pre">//</span></code> for single line comments or <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> for multi-line comments. Just like in C/C++ and JavaScript</li>
<li>Every QML file needs to have exactly one root element, like HTML</li>
<li>An element is declared by its type followed by <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code></li>
<li>Elements can have properties, they are in the form `` name: value``</li>
<li>Arbitrary elements inside a QML document can be accessed by using their <code class="docutils literal notranslate"><span class="pre">id</span></code> (an unquoted identifier)</li>
<li>Elements can be nested, meaning a parent element can have child elements. The parent element can be accessed using the <code class="docutils literal notranslate"><span class="pre">parent</span></code> keyword</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">import</span></code> statement you import a specific version of a module. For the QML modules that comes with Qt the version is linked to the Qt version you intend to use. The lower the version number, the earlier Qt version can be used. The minor version of the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement matches the minor version of the Qt release, so Qt 5.11 corresponds to <code class="docutils literal notranslate"><span class="pre">QtQuick</span></code> 2.11, Qt 5.12 to <code class="docutils literal notranslate"><span class="pre">QtQuick</span></code> 2.12 and so on. Prior to Qt 5.11, the QML modules shipped with Qt had their own versioning sequences, meaning that <code class="docutils literal notranslate"><span class="pre">QtQuick</span></code> followed the Qt versions, while <code class="docutils literal notranslate"><span class="pre">QtQuick.Controls</span></code> started with version 2.0 at Qt 5.7 and was at version 2.4 by Qt 5.11.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Often you want to access a particular element by id or a parent element using the <code class="docutils literal notranslate"><span class="pre">parent</span></code> keyword. So it’s good practice to name your root element “root” using <code class="docutils literal notranslate"><span class="pre">id:</span> <span class="pre">root</span></code>. Then you don’t have to think about how the root element is named in your QML document.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>You can run the example using the Qt Quick runtime from the command line from your OS like this:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">$</span> <span class="nx">$QTDIR</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">qmlscene</span> <span class="nx">RectangleExample</span><span class="p">.</span><span class="nx">qml</span>
</pre></div>
</div>
<p>Where you need to replace the <em>$QTDIR</em> to the path to your Qt installation. The <em>qmlscene</em> executable initializes the Qt Quick runtime and interprets the provided QML file.</p>
<p class="last">In Qt Creator, you can open the corresponding project file and run the document <code class="docutils literal notranslate"><span class="pre">RectangleExample.qml</span></code>.</p>
</div>
<div class="section" id="properties">
<h3>4.1.1. Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23properties"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Elements are declared by using their element name but are defined by using their properties or by creating custom properties. A property is a simple key-value pair, e.g. <code class="docutils literal notranslate"><span class="pre">width</span> <span class="pre">:</span> <span class="pre">100</span></code>, <code class="docutils literal notranslate"><span class="pre">text:</span> <span class="pre">'Greetings'</span></code>, <code class="docutils literal notranslate"><span class="pre">color:</span> <span class="pre">'#FF0000'</span></code>. A property has a well-defined type and can have an initial value.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Text</span> <span class="p">{</span>
        <span class="c1">// (1) identifier</span>
        <span class="kd">id: thisLabel</span>

        <span class="c1">// (2) set x- and y-position</span>
        <span class="k">x:</span> <span class="mi">24</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">16</span>

        <span class="c1">// (3) bind height to 2 * width</span>
        <span class="k">height:</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">width</span>

        <span class="c1">// (4) custom property</span>
        <span class="nx">property</span> <span class="kr">int</span> <span class="k">times:</span> <span class="mi">24</span>

        <span class="c1">// (5) property alias</span>
        <span class="nx">property</span> <span class="nx">alias</span> <span class="k">anotherTimes:</span> <span class="nx">thisLabel</span><span class="p">.</span><span class="nx">times</span>

        <span class="c1">// (6) set text appended by value</span>
        <span class="k">text:</span> <span class="s2">&quot;Greetings &quot;</span> <span class="o">+</span> <span class="nx">times</span>

        <span class="c1">// (7) font is a grouped property</span>
        <span class="k">font.family:</span> <span class="s2">&quot;Ubuntu&quot;</span>
        <span class="k">font.pixelSize:</span> <span class="mi">24</span>

        <span class="c1">// (8) KeyNavigation is an attached property</span>
        <span class="k">KeyNavigation.tab:</span> <span class="nx">otherLabel</span>

        <span class="c1">// (9) signal handler for property changes</span>
        <span class="k">onHeightChanged:</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;height:&#39;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="c1">// focus is need to receive key events</span>
        <span class="k">focus:</span> <span class="kc">true</span>

        <span class="c1">// change color based on focus value</span>
        <span class="k">color:</span> <span class="nx">focus</span><span class="o">?</span><span class="s2">&quot;red&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Let’s go through the different features of properties:</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">id</span></code> is a very special property-like value, it is used to reference elements inside a QML file (called “document” in QML). The <code class="docutils literal notranslate"><span class="pre">id</span></code> is not a string type but rather an identifier and part of the QML syntax. An <code class="docutils literal notranslate"><span class="pre">id</span></code> needs to be unique inside a document and it can’t be reset to a different value, nor may it be queried. (It behaves much like a reference in the C++ world.)</p>
</li>
<li><p class="first">A property can be set to a value, depending on its type. If no value is given for a property, an initial value will be chosen. You need to consult the documentation of the particular element for more information about the initial value of a property.</p>
</li>
<li><p class="first">A property can depend on one or many other properties. This is called <em>binding</em>. A bound property is updated when its dependent properties change. It works like a contract, in this case, the <code class="docutils literal notranslate"><span class="pre">height</span></code> should always be two times the <code class="docutils literal notranslate"><span class="pre">width</span></code>.</p>
</li>
<li><p class="first">Adding own properties to an element is done using the <code class="docutils literal notranslate"><span class="pre">property</span></code> qualifier followed by the type, the name and the optional initial value (<code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">&lt;type&gt;</span> <span class="pre">&lt;name&gt;</span> <span class="pre">:</span> <span class="pre">&lt;value&gt;</span></code>). If no initial value is given a system initial value is chosen.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also declare one property to be the default property if no property name is given by prepending the property declaration with the <code class="docutils literal notranslate"><span class="pre">default</span></code> keyword. This is used for example when you add child elements, the child elements are added automatically to the default property <code class="docutils literal notranslate"><span class="pre">children</span></code> of type list if they are visible elements.</p>
</div>
</li>
<li><p class="first">Another important way of declaring properties is using the <code class="docutils literal notranslate"><span class="pre">alias</span></code> keyword (<code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">alias</span> <span class="pre">&lt;name&gt;:</span> <span class="pre">&lt;reference&gt;</span></code>). The <code class="docutils literal notranslate"><span class="pre">alias</span></code> keyword allows us to forward a property of an object or an object itself from within the type to an outer scope. We will use this technique later when defining components to export the inner properties or element ids to the root level. A property alias does not need a type, it uses the type of the referenced property or object.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">text</span></code> property depends on the custom property <code class="docutils literal notranslate"><span class="pre">times</span></code> of type int. The <code class="docutils literal notranslate"><span class="pre">int</span></code> based value is automatically converted to a <code class="docutils literal notranslate"><span class="pre">string</span></code> type. The expression itself is another example of binding and results in the text being updated every time the <code class="docutils literal notranslate"><span class="pre">times</span></code> property changes.</p>
</li>
<li><p class="first">Some properties are grouped properties. This feature is used when a property is more structured and related properties should be grouped together. Another way of writing grouped properties is <code class="docutils literal notranslate"><span class="pre">font</span> <span class="pre">{</span> <span class="pre">family:</span> <span class="pre">&quot;Ubuntu&quot;;</span> <span class="pre">pixelSize:</span> <span class="pre">24</span> <span class="pre">}</span></code>.</p>
</li>
<li><p class="first">Some properties are attached to the element itself. This is done for global relevant elements which appear only once in the application (e.g. keyboard input). The writing is <code class="docutils literal notranslate"><span class="pre">&lt;Element&gt;.&lt;property&gt;:</span> <span class="pre">&lt;value&gt;</span></code>.</p>
</li>
<li><p class="first">For every property, you can provide a signal handler. This handler is called after the property changes. For example, here we want to be notified whenever the height changes and use the built-in console to log a message to the system.</p>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">An element id should only be used to reference elements inside your document (e.g. the current file). QML provides a mechanism called dynamic-scoping where later loaded documents overwrite the element id’s from earlier loaded documents. This makes it possible to reference element id’s from earlier loaded documents if they are not yet overwritten. It’s like creating global variables. Unfortunately, this frequently leads to really bad code in practice, where the program depends on the order of execution. Unfortunately, this can’t be turned off. Please only use this with care or even better don’t use this mechanism at all. It’s better to export the element you want to provide to the outside world using properties on the root element of your document.</p>
</div>
</div>
<div class="section" id="scripting">
<h3>4.1.2. Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23scripting"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>QML and JavaScript (also known as ECMAScript) are best friends. In the <em>JavaScript</em> chapter we will go into more detail on this symbiosis. Currently, we just want to make you aware of this relationship.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Text</span> <span class="p">{</span>
        <span class="kd">id: label</span>

        <span class="k">x:</span> <span class="mi">24</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">24</span>

        <span class="c1">// custom counter property for space presses</span>
        <span class="nx">property</span> <span class="kr">int</span> <span class="k">spacePresses:</span> <span class="mi">0</span>

        <span class="k">text:</span> <span class="s2">&quot;Space pressed: &quot;</span> <span class="o">+</span> <span class="nx">spacePresses</span> <span class="o">+</span> <span class="s2">&quot; times&quot;</span>

        <span class="c1">// (1) handler for text changes</span>
        <span class="k">onTextChanged:</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;text changed to:&quot;</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span>

        <span class="c1">// need focus to receive key events</span>
        <span class="k">focus:</span> <span class="kc">true</span>

        <span class="c1">// (2) handler with some JS</span>
        <span class="k">Keys.onSpacePressed:</span> <span class="p">{</span>
            <span class="nx">increment</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="c1">// clear the text on escape</span>
        <span class="k">Keys.onEscapePressed:</span> <span class="p">{</span>
            <span class="nx">label</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="p">}</span>

        <span class="c1">// (3) a JS function</span>
        <span class="kd">function</span> <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">spacePresses</span> <span class="o">=</span> <span class="nx">spacePresses</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple">
<li>The text changed handler <code class="docutils literal notranslate"><span class="pre">onTextChanged</span></code> prints the current text every-time the text changed due to a space-bar key pressed</li>
<li>When the text element receives the space-bar key (because the user pressed the space-bar on the keyboard) we call a JavaScript function <code class="docutils literal notranslate"><span class="pre">increment()</span></code>.</li>
<li>Definition of a JavaScript function in the form of <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">&lt;name&gt;(&lt;parameters&gt;)</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>, which increments our counter <code class="docutils literal notranslate"><span class="pre">spacePressed</span></code>. Every time <code class="docutils literal notranslate"><span class="pre">spacePressed</span></code> is incremented, bound properties will also be updated.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The difference between the QML <code class="docutils literal notranslate"><span class="pre">:</span></code> (binding) and the JavaScript <code class="docutils literal notranslate"><span class="pre">=</span></code> (assignment) is, that the binding is a contract and keeps true over the lifetime of the binding, whereas the JavaScript assignment (<code class="docutils literal notranslate"><span class="pre">=</span></code>) is a one time value assignment.
The lifetime of a binding ends, when a new binding is set to the property or even when a JavaScript value is assigned is to the property. For example, a key handler setting the text property to an empty string would destroy our increment display:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">Keys.onEscapePressed:</span> <span class="p">{</span>
    <span class="nx">label</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>After pressing escape, pressing the space-bar will not update the display anymore as the previous binding of the <code class="docutils literal notranslate"><span class="pre">text</span></code> property (<em>text: “Space pressed: ” + spacePresses + ” times”</em>) was destroyed.</p>
<p class="last">When you have conflicting strategies to change a property as in this case (text updated by a change to a property increment via a binding and text cleared by a JavaScript assignment) then you can’t use bindings! You need to use assignment on both property change paths as the binding will be destroyed by the assignment (broken contract!).</p>
</div>
</div>
</div>
<div class="section" id="basic-elements">
<h2>4.2. Basic Elements<a class="headerlink" href="#basic-elements" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23basic-elements"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-1">Elements can be grouped into visual and non-visual elements. A visual element (like the <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code>) has a geometry and normally presents an area on the screen. A non-visual element (like a <code class="docutils literal notranslate"><span class="pre">Timer</span></code>) provides general functionality, normally used to manipulate the visual elements.</p>
<p>Currently, we will focus on the fundamental visual elements, such as <code class="docutils literal notranslate"><span class="pre">Item</span></code>, <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code>, <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">Image</span></code> and <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code>. However, by using the Qt Quick Controls 2 module, it is possible to create user interfaces built from standard platform components such as buttons, labels and sliders.</p>
<div class="section" id="item-element">
<h3>4.2.1. Item Element<a class="headerlink" href="#item-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23item-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p><code class="docutils literal notranslate"><span class="pre">Item</span></code> is the base element for all visual elements as such all other visual elements inherits from <code class="docutils literal notranslate"><span class="pre">Item</span></code>. It doesn’t paint anything by itself but defines all properties which are common across all visual elements:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Group</th>
<th class="head">Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Geometry</td>
<td><code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> to define the top-left position, <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> for the expansion of the element and also the <code class="docutils literal notranslate"><span class="pre">z</span></code> stacking order to lift elements up or down from their natural ordering</td>
</tr>
<tr class="row-odd"><td>Layout handling</td>
<td><code class="docutils literal notranslate"><span class="pre">anchors</span></code> (left, right, top, bottom, vertical and horizontal center) to position elements relative to other elements with their <code class="docutils literal notranslate"><span class="pre">margins</span></code></td>
</tr>
<tr class="row-even"><td>Key handling</td>
<td>attached <code class="docutils literal notranslate"><span class="pre">Key</span></code> and <code class="docutils literal notranslate"><span class="pre">KeyNavigation</span></code> properties to control key handling and the input <code class="docutils literal notranslate"><span class="pre">focus</span></code> property to enable key handling in the first place</td>
</tr>
<tr class="row-odd"><td>Transformation</td>
<td><code class="docutils literal notranslate"><span class="pre">scale</span></code> and <code class="docutils literal notranslate"><span class="pre">rotate</span></code> transformation and the generic <code class="docutils literal notranslate"><span class="pre">transform</span></code> property list for <em>x,y,z</em> transformation and their <code class="docutils literal notranslate"><span class="pre">transformOrigin</span></code> point</td>
</tr>
<tr class="row-even"><td>Visual</td>
<td><code class="docutils literal notranslate"><span class="pre">opacity</span></code> to control transparency, <code class="docutils literal notranslate"><span class="pre">visible</span></code> to show/hide elements, <code class="docutils literal notranslate"><span class="pre">clip</span></code> to restrain paint operations to the element boundary and <code class="docutils literal notranslate"><span class="pre">smooth</span></code> to enhance the rendering quality</td>
</tr>
<tr class="row-odd"><td>State definition</td>
<td><code class="docutils literal notranslate"><span class="pre">states</span></code> list property with the supported list of states and the current <code class="docutils literal notranslate"><span class="pre">state</span></code> property as also the <code class="docutils literal notranslate"><span class="pre">transitions</span></code> list property to animate state changes.</td>
</tr>
</tbody>
</table>
<p>To better understand the different properties we will try to introduce them throughout this chapter in the context of the element presented. Please remember these fundamental properties are available on every visual element and work the same across these elements.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">Item</span></code> element is often used as a container for other elements, similar to the <em>div</em> element in HTML.</p>
</div>
</div>
<div class="section" id="rectangle-element">
<h3>4.2.2. Rectangle Element<a class="headerlink" href="#rectangle-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23rectangle-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> extends <code class="docutils literal notranslate"><span class="pre">Item</span></code> and adds a fill color to it. Additionally it supports borders defined by <code class="docutils literal notranslate"><span class="pre">border.color</span></code> and <code class="docutils literal notranslate"><span class="pre">border.width</span></code>. To create rounded rectangles you can use the <code class="docutils literal notranslate"><span class="pre">radius</span></code> property.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="kd">id: rect1</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">76</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
        <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
    <span class="p">}</span>
    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="kd">id: rect2</span>
        <span class="k">x:</span> <span class="mi">112</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">76</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
        <span class="k">border.color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="k">border.width:</span> <span class="mi">4</span>
        <span class="k">radius:</span> <span class="mi">8</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/rectangle2.png" src="../_images/rectangle2.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Valid colors values are colors from the SVG color names (see  <a class="reference external" href="http://www.w3.org/TR/css3-color/#svg-color">http://www.w3.org/TR/css3-color/#svg-color</a>). You can provide colors in QML in different ways, but the most common way is an RGB string (‘#FF4444’) or as a color name (e.g. ‘white’).</p>
</div>
<p>Besides a fill color and a border the rectangle also supports custom gradients.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="kd">id: rect1</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">176</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
        <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
            <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span> <span class="p">}</span>
            <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;slategray&quot;</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">border.color:</span> <span class="s2">&quot;slategray&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/rectangle3.png" src="../_images/rectangle3.png" />
</div>
<p>A gradient is defined by a series of gradient stops. Each stop has a position and a color. The position marks the position on the y-axis (0 = top, 1 = bottom). The color of the <code class="docutils literal notranslate"><span class="pre">GradientStop</span></code> marks the color at that position.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A rectangle with no <em>width/height</em> set will not be visible. This happens often when you have several rectangles width (height) depending on each other and something went wrong in your composition logic. So watch out!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not possible to create an angled gradient. For this, it’s better to use predefined images. One possibility would be to just rotate the rectangle with the gradient, but be aware the geometry of a rotated rectangle will not change and thus will lead to confusion as the geometry of the element is not the same as the visible area. From the authors perspective, it’s really better to use designed gradient images in that case.</p>
</div>
</div>
<div class="section" id="text-element">
<h3>4.2.3. Text Element<a class="headerlink" href="#text-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23text-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>To display text, you can use the <code class="docutils literal notranslate"><span class="pre">Text</span></code> element. Its most notable property is the <code class="docutils literal notranslate"><span class="pre">text</span></code> property of type <code class="docutils literal notranslate"><span class="pre">string</span></code>. The element calculates its initial width and height based on the given text and the font used. The font can be influenced using the font property group (e.g. <code class="docutils literal notranslate"><span class="pre">font.family</span></code>, <code class="docutils literal notranslate"><span class="pre">font.pixelSize</span></code>, …). To change the color of the text just use the color property.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Text</span> <span class="p">{</span>
        <span class="k">text:</span> <span class="s2">&quot;The quick brown fox&quot;</span>
        <span class="k">color:</span> <span class="s2">&quot;#303030&quot;</span>
        <span class="k">font.family:</span> <span class="s2">&quot;Ubuntu&quot;</span>
        <span class="k">font.pixelSize:</span> <span class="mi">28</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="figure">
<img alt="../_images/text.png" src="../_images/text.png" />
</div>
<p>Text can be aligned to each side and the center using the <code class="docutils literal notranslate"><span class="pre">horizontalAlignment</span></code> and <code class="docutils literal notranslate"><span class="pre">verticalAlignment</span></code> properties. To further enhance the text rendering you can use the <code class="docutils literal notranslate"><span class="pre">style</span></code> and <code class="docutils literal notranslate"><span class="pre">styleColor</span></code> property, which allows you render the text in outline, raised and sunken mode. For longer text, you often want to define a <em>break</em> position like <em>A very … long text</em>, this can be achieved using the <code class="docutils literal notranslate"><span class="pre">elide</span></code> property. The <code class="docutils literal notranslate"><span class="pre">elide</span></code> property allows you to set the elide position to the left, right or middle of your text. In case you don’t want the ‘…’ of the elide mode to appear but still want to see the full text you can also wrap the text using the <code class="docutils literal notranslate"><span class="pre">wrapMode</span></code> property (works only when the width is explicitly set):</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">Text</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">40</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
    <span class="k">text:</span> <span class="s1">&#39;A very long text&#39;</span>
    <span class="c1">// &#39;...&#39; shall appear in the middle</span>
    <span class="k">elide:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">ElideMiddle</span>
    <span class="c1">// red sunken text styling</span>
    <span class="k">style:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">Sunken</span>
    <span class="k">styleColor:</span> <span class="s1">&#39;#FF4444&#39;</span>
    <span class="c1">// align text to the top</span>
    <span class="k">verticalAlignment:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">AlignTop</span>
    <span class="c1">// only sensible when no elide mode</span>
    <span class="c1">// wrapMode: Text.WordWrap</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">Text</span></code> element only displays the given text. It does not render any background decoration. Besides the rendered text the <code class="docutils literal notranslate"><span class="pre">Text</span></code> element is transparent. It’s part of your overall design to provide a sensible background to the text element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be aware a <code class="docutils literal notranslate"><span class="pre">Text</span></code> initial width (height) is depending on the text string and on the font set. A <code class="docutils literal notranslate"><span class="pre">Text</span></code> element with no width set and no text will not be visible, as the initial width will be 0.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Often when you want to layout <code class="docutils literal notranslate"><span class="pre">Text</span></code> elements you need to differentiate between aligning the text inside the <code class="docutils literal notranslate"><span class="pre">Text</span></code> element boundary box or to align the element boundary box itself. In the former, you want to use the <code class="docutils literal notranslate"><span class="pre">horizontalAlignment</span></code> and <code class="docutils literal notranslate"><span class="pre">verticalAlignment</span></code> properties and in the latter case, you want to manipulate the element geometry or use anchors.</p>
</div>
</div>
<div class="section" id="image-element">
<h3>4.2.4. Image Element<a class="headerlink" href="#image-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23image-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> element is able to display images in various formats (e.g. PNG, JPG, GIF, BMP, WEBP). <em>For the full list of supported image formats, please consult the Qt documentation</em>. Besides the obvious <code class="docutils literal notranslate"><span class="pre">source</span></code> property to provide the image URL, it contains a <code class="docutils literal notranslate"><span class="pre">fillMode</span></code> which controls the resizing behavior.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Image</span> <span class="p">{</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="c1">// width: 72</span>
        <span class="c1">// height: 72</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/triangle_red.png&quot;</span>
    <span class="p">}</span>
    <span class="nx">Image</span> <span class="p">{</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="o">+</span><span class="mi">64</span><span class="o">+</span><span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="c1">// width: 72</span>
        <span class="k">height:</span> <span class="mi">72</span><span class="o">/</span><span class="mi">2</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/triangle_red.png&quot;</span>
        <span class="k">fillMode:</span> <span class="nx">Image</span><span class="p">.</span><span class="nx">PreserveAspectCrop</span>
        <span class="k">clip:</span> <span class="kc">true</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/image.png" src="../_images/image.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A URL can be a local path with forward slashes ( “./images/home.png” ) or a web-link (e.g. “<a class="reference external" href="http://example.org/home.png">http://example.org/home.png</a>”).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Image</span></code> elements using <code class="docutils literal notranslate"><span class="pre">PreserveAspectCrop</span></code> should also enable the clipping to avoid image data being rendered outside the <code class="docutils literal notranslate"><span class="pre">Image</span></code> boundaries. By default clipping is disabled (`` clip: false``). You need to enable clipping (`` clip: true``) to constrain the painting to the elements bounding rectangle. This can be used on any visual element.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Using C++ you are able to create your own image provider using <a class="reference external" href="http://doc.qt.io/qt-5//qquickimageprovider.html">QQuickImageProvider</a>. This allows you to create images on the fly and threaded image loading.</p>
</div>
</div>
<div class="section" id="mousearea-element">
<h3>4.2.5. MouseArea Element<a class="headerlink" href="#mousearea-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23mousearea-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>To interact with these elements you often will use a <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code>. It’s a rectangular invisible item in where you can capture mouse events. The mouse area is often used together with a visible item to execute commands when the user interacts with the visual part.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="kd">id: rect1</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">76</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
        <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="nx">MouseArea</span> <span class="p">{</span>
            <span class="kd">id: area</span>
            <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">height</span>
            <span class="k">onClicked:</span> <span class="nx">rect2</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="o">!</span><span class="nx">rect2</span><span class="p">.</span><span class="nx">visible</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="kd">id: rect2</span>
        <span class="k">x:</span> <span class="mi">112</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">76</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
        <span class="k">border.color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="k">border.width:</span> <span class="mi">4</span>
        <span class="k">radius:</span> <span class="mi">8</span>
    <span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last figure">
<img alt="../_images/mousearea1.png" src="../_images/mousearea1.png" />
</div>
</td>
<td><div class="first last figure">
<img alt="../_images/mousearea2.png" src="../_images/mousearea2.png" />
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an important aspect of Qt Quick, the input handling is separated from the visual presentation. By this it allows you to show the user an interface element, but the interaction area can be larger.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more complex interaction, <a class="reference external" href="https://doc-snapshots.qt.io/qt5-dev/qtquickhandlers-index.html">Qt Quick Input Handlers</a> where introduced with Qt 5.12. They are intended to be used instead of elements such as <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code> and <code class="docutils literal notranslate"><span class="pre">Flickable</span></code> and offer greater control and flexibility. The idea is to handle one interaction aspect in each handler instance instead of centralizing the handling of all events from a given source in a single element, which was the case before.</p>
</div>
</div>
</div>
<div class="section" id="components">
<h2>4.3. Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23components"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-2">A component is a reusable element and QML provides different ways to create components. Currently, we will look only at the simplest form - a file-based component. A file-based component is created by placing a QML element in a file and give the file an element name (e.g. <code class="docutils literal notranslate"><span class="pre">Button.qml</span></code>). You can use the component like every other element from the QtQuick module, in our case you would use this in your code as <code class="docutils literal notranslate"><span class="pre">Button</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>.</p>
<p>For example, let’s create a rectangle containing a text component and a mouse area. This resembles a simple button and doesn’t need to be more complicated for our purposes.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Rectangle</span> <span class="p">{</span> <span class="c1">// our inlined button ui</span>
        <span class="kd">id: button</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">width:</span> <span class="mi">116</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">26</span>
        <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="k">border.color:</span> <span class="s2">&quot;slategrey&quot;</span>
        <span class="nx">Text</span> <span class="p">{</span>
            <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
            <span class="k">text:</span> <span class="s2">&quot;Start&quot;</span>
        <span class="p">}</span>
        <span class="nx">MouseArea</span> <span class="p">{</span>
            <span class="k">anchors.fill:</span> <span class="nx">parent</span>
            <span class="k">onClicked:</span> <span class="p">{</span>
                <span class="nx">status</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;Button clicked!&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Text</span> <span class="p">{</span> <span class="c1">// text changes when button was clicked</span>
        <span class="kd">id: status</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">76</span>
        <span class="k">width:</span> <span class="mi">116</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">26</span>
        <span class="k">text:</span> <span class="s2">&quot;waiting ...&quot;</span>
        <span class="k">horizontalAlignment:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">AlignHCenter</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The UI will look similar to this. On the left the UI in the initial state, on the right after the button has been clicked.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last figure">
<img alt="../_images/button_waiting.png" src="../_images/button_waiting.png" />
</div>
</td>
<td><div class="first last figure">
<img alt="../_images/button_clicked.png" src="../_images/button_clicked.png" />
</div>
</td>
</tr>
</tbody>
</table>
<p>Our task is now to extract the button UI in a reusable component. For this, we shortly think about a possible API for our button. You can do this by imagining how someone else should use your button. Here’s what I came up with:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// minimal API for a button</span>
<span class="nx">Button</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;Click Me&quot;</span>
    <span class="nx">onClicked</span><span class="o">:</span> <span class="p">{</span> <span class="cm">/* do something */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>I would like to set the text using a <code class="docutils literal notranslate"><span class="pre">text</span></code> property and to implement my own click handler. Also, I would expect the button to have a sensible initial size, which I can overwrite (e.g. with <code class="docutils literal notranslate"><span class="pre">width:</span> <span class="pre">240</span></code> for example).</p>
<p>To achieve this we create a <code class="docutils literal notranslate"><span class="pre">Button.qml</span></code> file and copy our button UI inside. Additionally, we need to export the properties a user might want to change on the root level.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// Button.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="c1">// export button properties</span>
    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">text:</span> <span class="nx">label</span><span class="p">.</span><span class="nx">text</span>
    <span class="nx">signal</span> <span class="nx">clicked</span>

    <span class="k">width:</span> <span class="mi">116</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">26</span>
    <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
    <span class="k">border.color:</span> <span class="s2">&quot;slategrey&quot;</span>

    <span class="nx">Text</span> <span class="p">{</span>
        <span class="kd">id: label</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">text:</span> <span class="s2">&quot;Start&quot;</span>
    <span class="p">}</span>
    <span class="nx">MouseArea</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="nx">root</span><span class="p">.</span><span class="nx">clicked</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We have exported the text and clicked signal on the root level. Typically we name our root element root to make the referencing easier. We use the <code class="docutils literal notranslate"><span class="pre">alias</span></code> feature of QML, which is a way to export properties inside nested QML elements to the root level and make this available for the outside world. It is important to know, that only the root level properties can be accessed from outside this file by other components.</p>
<p>To use our new <code class="docutils literal notranslate"><span class="pre">Button</span></code> element we can simply declare it in our file. So the earlier example will become a little bit simplified.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Button</span> <span class="p">{</span> <span class="c1">// our Button component</span>
        <span class="kd">id: button</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">12</span>
        <span class="k">text:</span> <span class="s2">&quot;Start&quot;</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="nx">status</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;Button clicked!&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Text</span> <span class="p">{</span> <span class="c1">// text changes when button was clicked</span>
        <span class="kd">id: status</span>
        <span class="k">x:</span> <span class="mi">12</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">76</span>
        <span class="k">width:</span> <span class="mi">116</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">26</span>
        <span class="k">text:</span> <span class="s2">&quot;waiting ...&quot;</span>
        <span class="k">horizontalAlignment:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">AlignHCenter</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Now you can use as many buttons as you like in your UI by just using <code class="docutils literal notranslate"><span class="pre">Button</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>. A real button could be more complex, e.g providing feedback when clicked or showing a nicer decoration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you want to, you could even go a step further and use an item as a root element. This prevents users to change the color of our designed button and provides us with more control about the exported API. The target should be to export a minimal API. Practically this means we would need to replace the root <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> with an <code class="docutils literal notranslate"><span class="pre">Item</span></code> and make the rectangle a nested element in the root item.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="last highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Item</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">root</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mf">116</span><span class="p">;</span> <span class="nx">height</span><span class="o">:</span> <span class="mf">26</span>

    <span class="nx">property</span> <span class="nx">alias</span> <span class="nx">text</span><span class="o">:</span> <span class="nx">label</span><span class="p">.</span><span class="nx">text</span>
    <span class="nx">signal</span> <span class="nx">clicked</span>

    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="nx">anchors</span><span class="p">.</span><span class="nx">fill</span> <span class="nx">parent</span>
        <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="nx">border</span><span class="p">.</span><span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;slategrey&quot;</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this technique, it is easy to create a whole series of reusable components.</p>
</div>
<div class="section" id="simple-transformations">
<h2>4.4. Simple Transformations<a class="headerlink" href="#simple-transformations" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23simple-transformations"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-3">A transformation manipulates the geometry of an object. QML Items can, in general, be translated, rotated and scaled. There is a simple form of these operations and a more advanced way.</p>
<p>Let’s start with the simple transformations. Here is our scene as our starting point.</p>
<p>A simple translation is done via changing the <code class="docutils literal notranslate"><span class="pre">x,y</span></code> position. A rotation is done using the <code class="docutils literal notranslate"><span class="pre">rotation</span></code> property. The value is provided in degrees (0 .. 360). A scaling is done using the <code class="docutils literal notranslate"><span class="pre">scale</span></code> property and a value &lt;1 means the element is scaled down and <code class="docutils literal notranslate"><span class="pre">&gt;1</span></code> means the element is scaled up. The rotation and scaling do not change your geometry. The items <code class="docutils literal notranslate"><span class="pre">x,y</span></code> and <code class="docutils literal notranslate"><span class="pre">width/height</span></code> haven’t changed. Just the painting instructions are transformed.</p>
<p>Before we show off the example I would like to introduce a little helper: The <code class="docutils literal notranslate"><span class="pre">ClickableImage</span></code> element. The <code class="docutils literal notranslate"><span class="pre">ClickableImage</span></code> is just an image with a mouse area. This brings up a useful rule of thumb - if you have copied a chunk of code three times, extract it into a component.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// ClickableImage.qml</span>

<span class="c1">// Simple image which can be clicked</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Image</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="nx">signal</span> <span class="nx">clicked</span>

    <span class="nx">MouseArea</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">onClicked:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">clicked</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/objects.png" src="../_images/objects.png" />
</div>
<p>We use our clickable image to present three objects (box, circle, triangle). Each object performs a simple transformation when clicked. Clicking the background will reset the scene.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// transformation.qml</span>


<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Item</span> <span class="p">{</span>
    <span class="c1">// set width based on given background</span>
    <span class="k">width:</span> <span class="nx">bg</span><span class="p">.</span><span class="nx">width</span>
    <span class="k">height:</span> <span class="nx">bg</span><span class="p">.</span><span class="nx">height</span>

    <span class="nx">Image</span> <span class="p">{</span> <span class="c1">// nice background image</span>
        <span class="kd">id: bg</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/background.png&quot;</span>
    <span class="p">}</span>

    <span class="nx">MouseArea</span> <span class="p">{</span>
        <span class="kd">id: backgroundClicker</span>
        <span class="c1">// needs to be before the images as order matters</span>
        <span class="c1">// otherwise this mousearea would be before the other elements</span>
        <span class="c1">// and consume the mouse events</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="c1">// reset our little scene</span>
            <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">84</span>
            <span class="nx">box</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="nx">triangle</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="nx">triangle</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ClickableImage</span> <span class="p">{</span>
        <span class="kd">id: circle</span>
        <span class="k">x:</span> <span class="mi">84</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">68</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/circle_blue.png&quot;</span>
        <span class="k">antialiasing:</span> <span class="kc">true</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="c1">// increase the x-position on click</span>
            <span class="nx">x</span> <span class="o">+=</span> <span class="mi">20</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ClickableImage</span> <span class="p">{</span>
        <span class="kd">id: box</span>
        <span class="k">x:</span> <span class="mi">164</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">68</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/box_green.png&quot;</span>
        <span class="k">antialiasing:</span> <span class="kc">true</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="c1">// increase the rotation on click</span>
            <span class="nx">rotation</span> <span class="o">+=</span> <span class="mi">15</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ClickableImage</span> <span class="p">{</span>
        <span class="kd">id: triangle</span>
        <span class="k">x:</span> <span class="mi">248</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">68</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/triangle_red.png&quot;</span>
        <span class="k">antialiasing:</span> <span class="kc">true</span>
        <span class="k">onClicked:</span> <span class="p">{</span>
            <span class="c1">// several transformations</span>
            <span class="nx">rotation</span> <span class="o">+=</span> <span class="mi">15</span>
            <span class="nx">scale</span> <span class="o">+=</span> <span class="mf">0.05</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">_test_transformed</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mi">20</span>
        <span class="nx">box</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="nx">triangle</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="mf">1.2</span>
        <span class="nx">triangle</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">15</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">_test_overlap</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mi">40</span>
        <span class="nx">box</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="nx">triangle</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="mf">2.0</span>
        <span class="nx">triangle</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">45</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/objects_transformed.png" src="../_images/objects_transformed.png" />
</div>
<p>The circle increments the x-position on each click and the box will rotate on each click. The triangle will rotate and scale the image up on each click, to demonstrate a combined transformation. For the scaling and rotation operation we set <code class="docutils literal notranslate"><span class="pre">antialiasing:</span> <span class="pre">true</span></code> to enable anti-aliasing, which is switched off (same as the clipping property <code class="docutils literal notranslate"><span class="pre">clip</span></code>) for performance reasons.  In your own work, when you see some rasterized edges in your graphics, then you should probably switch smoothly on.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To achieve better visual quality when scaling images it is recommended to scale images down instead of up. Scaling an image up with a larger scaling factor will result in scaling artifacts (blurred image). When scaling an image you should consider using `` antialiasing: true`` to enable the usage of a higher quality filter.</p>
</div>
<p>The background <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code> covers the whole background and resets the object values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Elements which appear earlier in the code have a lower stacking order (called z-order). If you click long enough on <code class="docutils literal notranslate"><span class="pre">circle</span></code> you will see it moves below <code class="docutils literal notranslate"><span class="pre">box</span></code>. The z-order can also be manipulated by the <code class="docutils literal notranslate"><span class="pre">z-property</span></code> of an Item.</p>
<div class="figure">
<img alt="../_images/objects_overlap.png" src="../_images/objects_overlap.png" />
</div>
<p>This is because <code class="docutils literal notranslate"><span class="pre">box</span></code> appears later in the code. The same applies also to mouse areas. A mouse area later in the code will overlap (and thus grab the mouse events) of a mouse area earlier in the code.</p>
<p class="last">Please remember: <em>The order of elements in the document matters</em>.</p>
</div>
</div>
<div class="section" id="positioning-elements">
<h2>4.5. Positioning Elements<a class="headerlink" href="#positioning-elements" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23positioning-elements"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-4">There are a number of QML elements used to position items. These are called positioners and the following are provided in the QtQuick module <code class="docutils literal notranslate"><span class="pre">Row</span></code>, <code class="docutils literal notranslate"><span class="pre">Column</span></code>, <code class="docutils literal notranslate"><span class="pre">Grid</span></code> and <code class="docutils literal notranslate"><span class="pre">Flow</span></code>. They can be seen showing the same contents in the illustration below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Before we go into details, let me introduce some helper elements. The red, blue, green, lighter and darker squares. Each of these components contains a 48x48 pixels colorized rectangle. As a reference here is the source code for the <code class="docutils literal notranslate"><span class="pre">RedSquare</span></code>:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// RedSquare.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">48</span>
    <span class="k">height:</span> <span class="mi">48</span>
    <span class="k">color:</span> <span class="s2">&quot;#ea7025&quot;</span>
    <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last">Please note the use of <code class="docutils literal notranslate"><span class="pre">Qt.lighter(color)</span></code> to produce a lighter border color based on the fill color. We will use these helpers in the next examples to make the source code more compact and hopefully readable. Please remember, each rectangle is initial 48x48 pixels.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Column</span></code> element arranges child items into a column by stacking them on top of each other. The <code class="docutils literal notranslate"><span class="pre">spacing</span></code> property can be used to distance each of the child elements from each other.</p>
<div class="figure">
<img alt="../_images/column.png" src="../_images/column.png" />
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// column.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">DarkSquare</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">120</span>
    <span class="k">height:</span> <span class="mi">240</span>

    <span class="nx">Column</span> <span class="p">{</span>
        <span class="kd">id: row</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">spacing:</span> <span class="mi">8</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">GreenSquare</span> <span class="p">{</span> <span class="k">width:</span> <span class="mi">96</span> <span class="p">}</span>
        <span class="nx">BlueSquare</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Row</span></code> element places its child items next to each other, either from the left to the right or from the right to the left, depending on the <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code> property. Again, <code class="docutils literal notranslate"><span class="pre">spacing</span></code> is used to separate child items.</p>
<div class="figure">
<img alt="../_images/row.png" src="../_images/row.png" />
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// row.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">BrightSquare</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">400</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>

    <span class="nx">Row</span> <span class="p">{</span>
        <span class="kd">id: row</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">spacing:</span> <span class="mi">20</span>
        <span class="nx">BlueSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">GreenSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Grid</span></code> element arranges its children in a grid, by setting the <code class="docutils literal notranslate"><span class="pre">rows</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code> properties, the number of rows or columns can be constrained. By not setting either of them, the other is calculated from the number of child items. For instance, setting rows to 3 and adding 6 child items will result in 2 columns. The properties <code class="docutils literal notranslate"><span class="pre">flow</span></code> and <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code> are used to control the order in which the items are added to the grid, while <code class="docutils literal notranslate"><span class="pre">spacing</span></code> controls the amount of space separating the child items.</p>
<div class="figure">
<img alt="../_images/grid.png" src="../_images/grid.png" />
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// grid.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">BrightSquare</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">160</span>
    <span class="k">height:</span> <span class="mi">160</span>

    <span class="nx">Grid</span> <span class="p">{</span>
        <span class="kd">id: grid</span>
        <span class="k">rows:</span> <span class="mi">2</span>
        <span class="k">columns:</span> <span class="mi">2</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">spacing:</span> <span class="mi">8</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The final positioner is <code class="docutils literal notranslate"><span class="pre">Flow</span></code>. It adds its child items in a flow. The direction of the flow is controlled using <code class="docutils literal notranslate"><span class="pre">flow</span></code> and <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code>. It can run sideways or from the top to the bottom. It can also run from left to right or in the opposite direction. As the items are added in the flow, they are wrapped to form new rows or columns as needed. In order for a flow to work, it must have a width or a height. This can be set either directly, or though anchor layouts.</p>
<div class="figure">
<img alt="../_images/flow.png" src="../_images/flow.png" />
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// flow.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">BrightSquare</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">160</span>
    <span class="k">height:</span> <span class="mi">160</span>

    <span class="nx">Flow</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>
        <span class="k">spacing:</span> <span class="mi">20</span>
        <span class="nx">RedSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">BlueSquare</span> <span class="p">{</span> <span class="p">}</span>
        <span class="nx">GreenSquare</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An element often used with positioners is the <code class="docutils literal notranslate"><span class="pre">Repeater</span></code>. It works like a for-loop and iterates over a model. In the simplest case a model is just a value providing the number of loops.</p>
<div class="figure">
<img alt="../_images/repeater.png" src="../_images/repeater.png" />
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// repeater.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">DarkSquare</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">252</span>
    <span class="k">height:</span> <span class="mi">252</span>
    <span class="nx">property</span> <span class="nx">variant</span> <span class="k">colorArray:</span> <span class="p">[</span><span class="s2">&quot;#00bde3&quot;</span><span class="p">,</span> <span class="s2">&quot;#67c111&quot;</span><span class="p">,</span> <span class="s2">&quot;#ea7025&quot;</span><span class="p">]</span>


    <span class="nx">Grid</span><span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">8</span>
        <span class="k">spacing:</span> <span class="mi">4</span>
        <span class="nx">Repeater</span> <span class="p">{</span>
            <span class="k">model:</span> <span class="mi">16</span>
            <span class="nx">Rectangle</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">56</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">56</span>
                <span class="nx">property</span> <span class="kr">int</span> <span class="k">colorIndex:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
                <span class="k">color:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">colorArray</span><span class="p">[</span><span class="nx">colorIndex</span><span class="p">]</span>
                <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">)</span>
                <span class="nx">Text</span> <span class="p">{</span>
                    <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
                    <span class="k">color:</span> <span class="s2">&quot;#f0f0f0&quot;</span>
                    <span class="k">text:</span> <span class="s2">&quot;Cell &quot;</span> <span class="o">+</span> <span class="nx">index</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this repeater example, we use some new magic. We define our own color property, which we use as an array of colors. The repeater creates a series of rectangles (16, as defined by the model). For each loop, he creates the rectangle as defined by the child of the repeater. In the rectangle we chose the color by using JS math functions <code class="docutils literal notranslate"><span class="pre">Math.floor(Math.random()*3)</span></code>. This gives us a random number in the range from 0..2, which we use to select the color from our color array. As noted earlier, JavaScript is a core part of Qt Quick, as such the standard libraries are available for us.</p>
<p>A repeater injects the <code class="docutils literal notranslate"><span class="pre">index</span></code> property into the repeater. It contains the current loop-index. (0,1,..15). We can use this to make our own decisions based on the index, or in our case to visualize the current index with the <code class="docutils literal notranslate"><span class="pre">Text</span></code> element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More advanced handling of larger models and kinetic views with dynamic delegates is covered in an own model-view chapter. Repeaters are best used when having a small amount of static data to be presented.</p>
</div>
</div>
<div class="section" id="layout-items">
<h2>4.6. Layout Items<a class="headerlink" href="#layout-items" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23layout-items"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="admonition-todo admonition" id="index-6">
<span id="index-5"></span><p class="first admonition-title">Todo</p>
<p class="last">do we need to remove all uses of anchors earlier?</p>
</div>
<p>QML provides a flexible way to layout items using anchors. The concept of anchoring is part of the <code class="docutils literal notranslate"><span class="pre">Item</span></code> fundamental properties and available to all visual QML elements. Anchors act like a contract and are stronger than competing geometry changes. Anchors are expressions of relativeness, you always need a related element to anchor with.</p>
<div class="figure">
<img alt="../_images/anchors.png" src="../_images/anchors.png" />
</div>
<p>An element has 6 major anchor lines (top, bottom, left, right, horizontalCenter, verticalCenter). Additional there is the baseline anchor for text in Text elements. Each anchor line comes with an offset. In the case of the top, bottom left and right they are called margins. For horizontalCenter, verticalCenter and baseline they are called offsets.</p>
<div class="figure">
<img alt="../_images/anchorgrid.png" src="../_images/anchorgrid.png" />
</div>
<ol class="arabic">
<li><p class="first">An element fills a parent element</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">12</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                <span class="k">anchors.margins:</span> <span class="mi">8</span>
                <span class="k">text:</span> <span class="s1">&#39;(1)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">An element is left aligned to the parent</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">48</span>
                <span class="k">y:</span> <span class="mi">8</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                <span class="k">anchors.leftMargin:</span> <span class="mi">8</span>
                <span class="k">text:</span> <span class="s1">&#39;(2)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">An element left side is aligned to the parent’s right side</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">48</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
                <span class="k">text:</span> <span class="s1">&#39;(3)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Center-aligned elements. <code class="docutils literal notranslate"><span class="pre">Blue1</span></code> is horizontally centered on the parent. <code class="docutils literal notranslate"><span class="pre">Blue2</span></code> is also horizontal centered but on <code class="docutils literal notranslate"><span class="pre">Blue1</span></code> and it’s top is aligned to the <code class="docutils literal notranslate"><span class="pre">Blue1</span></code> bottom line.</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="kd">id: blue1</span>
                <span class="k">width:</span> <span class="mi">48</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">24</span>
                <span class="k">y:</span> <span class="mi">8</span>
                <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
            <span class="p">}</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="kd">id: blue2</span>
                <span class="k">width:</span> <span class="mi">72</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">24</span>
                <span class="k">anchors.top:</span> <span class="nx">blue1</span><span class="p">.</span><span class="nx">bottom</span>
                <span class="k">anchors.topMargin:</span> <span class="mi">4</span>
                <span class="k">anchors.horizontalCenter:</span> <span class="nx">blue1</span><span class="p">.</span><span class="nx">horizontalCenter</span>
                <span class="k">text:</span> <span class="s1">&#39;(4)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">An element is centered on a parent element</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">48</span>
                <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
                <span class="k">text:</span> <span class="s1">&#39;(5)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">An element is centered with a left-offset on a parent element using horizontal and vertical center lines</p>
<blockquote>
<div><div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>        <span class="nx">GreenSquare</span> <span class="p">{</span>
            <span class="nx">BlueSquare</span> <span class="p">{</span>
                <span class="k">width:</span> <span class="mi">48</span>
                <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
                <span class="k">anchors.horizontalCenterOffset:</span> <span class="o">-</span><span class="mi">12</span>
                <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
                <span class="k">text:</span> <span class="s1">&#39;(6)&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Our squares have been enhanced to enable dragging. Try the example and drag around some squares. You will see that (1) can’t be dragged as it’s anchored on all sides, sure you can drag the parent of (1) as it’s not anchored at all. (2) can be vertically dragged as only the left side is anchored. Similar applies to (3). (4) can only be dragged vertically as both squares are horizontally centered. (5) is centered on the parent and as such can’t be dragged, similar applies to (7). Dragging an element means changing their <code class="docutils literal notranslate"><span class="pre">x,y</span></code> position. As anchoring is stronger than geometry changes such as <code class="docutils literal notranslate"><span class="pre">x,y</span></code>, dragging is restricted by the anchored lines. We will see this effect later when we discuss animations.</p>
</div>
</div>
<div class="section" id="input-elements">
<h2>4.7. Input Elements<a class="headerlink" href="#input-elements" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23input-elements"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p id="index-7">We have already used the <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code> as a mouse input element. Next, we’ll focus on keyboard input. We start off with the text editing elements: <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> and <code class="docutils literal notranslate"><span class="pre">TextEdit</span></code>.</p>
<div class="section" id="textinput">
<h3>4.7.1. TextInput<a class="headerlink" href="#textinput" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23textinput"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> allows the user to enter a line of text. The element supports input constraints such as <code class="docutils literal notranslate"><span class="pre">validator</span></code>, <code class="docutils literal notranslate"><span class="pre">inputMask</span></code>, and <code class="docutils literal notranslate"><span class="pre">echoMode</span></code>.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// textinput.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">200</span>
    <span class="k">height:</span> <span class="mi">80</span>
    <span class="k">color:</span> <span class="s2">&quot;linen&quot;</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input1</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">8</span>
        <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">20</span>
        <span class="k">focus:</span> <span class="kc">true</span>
        <span class="k">text:</span> <span class="s2">&quot;Text Input 1&quot;</span>
    <span class="p">}</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input2</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">36</span>
        <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">20</span>
        <span class="k">text:</span> <span class="s2">&quot;Text Input 2&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/textinput.png" src="../_images/textinput.png" />
</div>
<p>The user can click inside a <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> to change the focus. To support switching the focus by keyboard, we can use the <code class="docutils literal notranslate"><span class="pre">KeyNavigation</span></code> attached property.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// textinput2.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">200</span>
    <span class="k">height:</span> <span class="mi">80</span>
    <span class="k">color:</span> <span class="s2">&quot;linen&quot;</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input1</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">8</span>
        <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">20</span>
        <span class="k">focus:</span> <span class="kc">true</span>
        <span class="k">text:</span> <span class="s2">&quot;Text Input 1&quot;</span>
        <span class="k">KeyNavigation.tab:</span> <span class="nx">input2</span>
    <span class="p">}</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input2</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">36</span>
        <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">20</span>
        <span class="k">text:</span> <span class="s2">&quot;Text Input 2&quot;</span>
        <span class="k">KeyNavigation.tab:</span> <span class="nx">input1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">KeyNavigation</span></code> attached property supports a preset of navigation keys where an element id is bound to switch focus on the given key press.</p>
<p>A text input element comes with no visual presentation beside a blinking cursor and the entered text. For the user to be able to recognize the element as an input element it needs some visual decoration, for example, a simple rectangle. When placing the <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> inside an element you need make sure you export the major properties you want others to be able to access.</p>
<p>We move this piece of code into our own component called <code class="docutils literal notranslate"><span class="pre">TLineEditV1</span></code> for reuse.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// TLineEditV1.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="nx">input</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="mi">8</span>
    <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
    <span class="k">border.color:</span> <span class="s2">&quot;gray&quot;</span>

    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">text:</span> <span class="nx">input</span><span class="p">.</span><span class="nx">text</span>
    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">input:</span> <span class="nx">input</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">4</span>
        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to export the <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> completely, you can export the element by using <code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">alias</span> <span class="pre">input:</span> <span class="pre">input</span></code>. The first <code class="docutils literal notranslate"><span class="pre">input</span></code> is the property name, where the 2nd input is the element id.</p>
</div>
<p>We rewrite our <code class="docutils literal notranslate"><span class="pre">KeyNavigation</span></code> example with the new <code class="docutils literal notranslate"><span class="pre">TLineEditV1</span></code> component.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="nx">TLineEditV1</span> <span class="p">{</span>
        <span class="nx">id</span><span class="o">:</span> <span class="nx">input1</span>
        <span class="p">...</span>
    <span class="p">}</span>
    <span class="nx">TLineEditV1</span> <span class="p">{</span>
        <span class="nx">id</span><span class="o">:</span> <span class="nx">input2</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/textinput3.png" src="../_images/textinput3.png" />
</div>
<p>And try the tab key for navigation. You will experience the focus does not change to <code class="docutils literal notranslate"><span class="pre">input2</span></code>. The simple use of <code class="docutils literal notranslate"><span class="pre">focus:</span> <span class="pre">true</span></code> is not sufficient. The problem arises, that the focus was transferred to the <code class="docutils literal notranslate"><span class="pre">input2</span></code> element the top-level item inside the <code class="docutils literal notranslate"><span class="pre">TlineEditV1</span></code> (our <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code>) received focus and did not forward the focus to the <code class="docutils literal notranslate"><span class="pre">TextInput</span></code>. To prevent this QML offers the <code class="docutils literal notranslate"><span class="pre">FocusScope</span></code>.</p>
</div>
<div class="section" id="focusscope">
<h3>4.7.2. FocusScope<a class="headerlink" href="#focusscope" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23focusscope"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>A focus scope declares that the last child element with <code class="docutils literal notranslate"><span class="pre">focus:</span> <span class="pre">true</span></code> receives the focus if the focus scope receives the focus. So it’s forward the focus to the last focus requesting child element. We will create a 2nd version of our TLineEdit component called TLineEditV2 using the focus scope as the root element.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// TLineEditV2.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">FocusScope</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="nx">input</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="mi">8</span>
    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="k">border.color:</span> <span class="s2">&quot;gray&quot;</span>

    <span class="p">}</span>

    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">text:</span> <span class="nx">input</span><span class="p">.</span><span class="nx">text</span>
    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">input:</span> <span class="nx">input</span>

    <span class="nx">TextInput</span> <span class="p">{</span>
        <span class="kd">id: input</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">4</span>
        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Our example will now look like this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="nx">TLineEditV2</span> <span class="p">{</span>
        <span class="nx">id</span><span class="o">:</span> <span class="nx">input1</span>
        <span class="p">...</span>
    <span class="p">}</span>
    <span class="nx">TLineEditV2</span> <span class="p">{</span>
        <span class="nx">id</span><span class="o">:</span> <span class="nx">input2</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pressing the tab key now successfully switches the focus between the 2 components and the correct child element inside the component is focused.</p>
</div>
<div class="section" id="textedit">
<h3>4.7.3. TextEdit<a class="headerlink" href="#textedit" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23textedit"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The <code class="docutils literal notranslate"><span class="pre">TextEdit</span></code> is very similar to <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> and support a multi-line text edit field. It doesn’t have the text constraint properties as this depends on querying the painted size of the text (<code class="docutils literal notranslate"><span class="pre">paintedHeight</span></code>, <code class="docutils literal notranslate"><span class="pre">paintedWidth</span></code>). We also create our own component called <code class="docutils literal notranslate"><span class="pre">TTextEdit</span></code> to provide an editing background and use the focus scope for better focus forwarding.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// TTextEdit.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">FocusScope</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">96</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">96</span>
    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">color:</span> <span class="s2">&quot;lightsteelblue&quot;</span>
        <span class="k">border.color:</span> <span class="s2">&quot;gray&quot;</span>

    <span class="p">}</span>

    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">text:</span> <span class="nx">input</span><span class="p">.</span><span class="nx">text</span>
    <span class="nx">property</span> <span class="nx">alias</span> <span class="k">input:</span> <span class="nx">input</span>

    <span class="nx">TextEdit</span> <span class="p">{</span>
        <span class="kd">id: input</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">4</span>
        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can use it like the <code class="docutils literal notranslate"><span class="pre">TLineEdit</span></code> component</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// textedit.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">136</span>
    <span class="k">height:</span> <span class="mi">120</span>
    <span class="k">color:</span> <span class="s2">&quot;linen&quot;</span>

    <span class="nx">TTextEdit</span> <span class="p">{</span>
        <span class="kd">id: input</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">8</span>
        <span class="k">width:</span> <span class="mi">120</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">104</span>
        <span class="k">focus:</span> <span class="kc">true</span>
        <span class="k">text:</span> <span class="s2">&quot;Text Edit&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/textedit.png" src="../_images/textedit.png" />
</div>
</div>
<div class="section" id="keys-element">
<h3>4.7.4. Keys Element<a class="headerlink" href="#keys-element" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23keys-element"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The attached property <code class="docutils literal notranslate"><span class="pre">Keys</span></code> allows executing code based on certain key presses. For example, to move a square around and scale we can hook into the up, down, left and right keys to translate the element and the plus, minus key to scale the element.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// keys.qml</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">DarkSquare</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">400</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">200</span>

    <span class="nx">GreenSquare</span> <span class="p">{</span>
        <span class="kd">id: square</span>
        <span class="k">x:</span> <span class="mi">8</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">8</span>
    <span class="p">}</span>
    <span class="k">focus:</span> <span class="kc">true</span>
    <span class="k">Keys.onLeftPressed:</span> <span class="nx">square</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="mi">8</span>
    <span class="k">Keys.onRightPressed:</span> <span class="nx">square</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mi">8</span>
    <span class="k">Keys.onUpPressed:</span> <span class="nx">square</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="mi">8</span>
    <span class="k">Keys.onDownPressed:</span> <span class="nx">square</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="mi">8</span>
    <span class="k">Keys.onPressed:</span> <span class="p">{</span>
        <span class="k">switch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="k">Qt.Key_Plus:</span>
                <span class="nx">square</span><span class="p">.</span><span class="nx">scale</span> <span class="o">+=</span> <span class="mf">0.2</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="k">Qt.Key_Minus:</span>
                <span class="nx">square</span><span class="p">.</span><span class="nx">scale</span> <span class="o">-=</span> <span class="mf">0.2</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/keys.png" src="../_images/keys.png" />
</div>
</div>
</div>
<div class="section" id="advanced-techniques">
<h2>4.8. Advanced Techniques<a class="headerlink" href="#advanced-techniques" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch04&body=back-link%3A+ch04-qmlstart%2Fqmlstart.html%23advanced-techniques"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch04&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="section" id="performance-of-qml">
<h3>4.8.1. Performance of QML<a class="headerlink" href="#performance-of-qml" title="Permalink to this headline">¶</a></h3>
<p>QML and Javascript are interpreted languages. This means that they do not have to be processed by a compiler before being executed. Instead, they are being run inside an execution engine. However, as interpretation is a costly operation various techniques are used to improvide performance.</p>
<p>The QML engine uses just-in-time (JIT) compilation to improve performance. It also caches the intermediate output to avoid having to recompile. This works seamlessly for you as a developer. The only trace of this is that files ending with <code class="docutils literal notranslate"><span class="pre">qmlc</span></code> and <code class="docutils literal notranslate"><span class="pre">jsc</span></code> can be found next to the source files.</p>
<p>If you want to avoid the initial start-up penalty induced by the initial parsing you can also pre-compile your QML and Javascript. This requires you to put your code into a Qt resource file and is described in detail in the <a class="reference external" href="http://doc.qt.io/qt-5/qtquick-deployment.html#compiling-qml-ahead-of-time">Compiling QML Ahead of Time</a> chapter in the Qt documentation.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2018 Jürgen Bocklage-Ryannel and Johan Thelin. This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.<br/>
      Last updated on Dec 07, 2020.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46104829-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>