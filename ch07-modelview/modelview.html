<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7. Model-View-Delegate &#8212; Qt5 Cadaques Book vmaster</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom-styles.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Felgo" href="../ch08-felgo/felgo.html" />
    <link rel="prev" title="6. Qt Quick Controls 2" href="../ch06-controls/controls.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QmlBook</a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Chapters <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ch01-meetqt/meetqt.html">1. Meet Qt 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch02-start/start.html">2. Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch03-qtcreator/qtcreator.html">3. Qt Creator IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch04-qmlstart/qmlstart.html">4. Quick Starter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch05-fluid/fluid.html">5. Fluid Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch06-controls/controls.html">6. Qt Quick Controls 2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Model-View-Delegate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch08-felgo/felgo.html">8. Felgo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch09-canvas/canvas.html">9. Canvas Element</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch10-particles/particles.html">10. Particle Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch11-shaders/shaders.html">11. Shader Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch12-multimedia/multimedia.html">12. Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch13-networking/networking.html">13. Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch14-storage/storage.html">14. Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch15-dynamicqml/dynamicqml.html">15. Dynamic QML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch16-javascript/javascript.html">16. JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch17-qtcpp/qtcpp.html">17. Qt and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch18-extensions/extensions.html">18. Extending QML with C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch19-felgo-plugins/felgo-plugins.html">19. Felgo Plugins and QML Hot Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch20-python/python.html">20. Qt for Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">1. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/deployment.html">2. Deploying QML Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../draganddrop/draganddrop.html">3. Drag and Drop</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">7. Model-View-Delegate</a><ul>
<li><a class="reference internal" href="#concept">7.1. Concept</a></li>
<li><a class="reference internal" href="#basic-models">7.2. Basic Models</a></li>
<li><a class="reference internal" href="#dynamic-views">7.3. Dynamic Views</a><ul>
<li><a class="reference internal" href="#orientation">7.3.1. Orientation</a></li>
<li><a class="reference internal" href="#keyboard-navigation-and-highlighting">7.3.2. Keyboard Navigation and Highlighting</a></li>
<li><a class="reference internal" href="#header-and-footer">7.3.3. Header and Footer</a></li>
<li><a class="reference internal" href="#the-gridview">7.3.4. The GridView</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delegate">7.4. Delegate</a><ul>
<li><a class="reference internal" href="#animating-added-and-removed-items">7.4.1. Animating Added and Removed Items</a></li>
<li><a class="reference internal" href="#shape-shifting-delegates">7.4.2. Shape-Shifting Delegates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-techniques">7.5. Advanced Techniques</a><ul>
<li><a class="reference internal" href="#the-pathview">7.5.1. The PathView</a></li>
<li><a class="reference internal" href="#table-models">7.5.2. Table Models</a></li>
<li><a class="reference internal" href="#a-model-from-xml">7.5.3. A Model from XML</a></li>
<li><a class="reference internal" href="#lists-with-sections">7.5.4. Lists with Sections</a></li>
<li><a class="reference internal" href="#the-objectmodel">7.5.5. The ObjectModel</a></li>
<li><a class="reference internal" href="#models-with-actions">7.5.6. Models with Actions</a></li>
<li><a class="reference internal" href="#tuning-performance">7.5.7. Tuning Performance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">7.6. Summary</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../ch06-controls/controls.html" title="Previous Chapter: 6. Qt Quick Controls 2"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 6. Qt Quick C...</span>
    </a>
  </li>
  <li>
    <a href="../ch08-felgo/felgo.html" title="Next Chapter: 8. Felgo"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">8. Felgo &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">7. Model-View-Delegate</a><ul>
<li><a class="reference internal" href="#concept">7.1. Concept</a></li>
<li><a class="reference internal" href="#basic-models">7.2. Basic Models</a></li>
<li><a class="reference internal" href="#dynamic-views">7.3. Dynamic Views</a><ul>
<li><a class="reference internal" href="#orientation">7.3.1. Orientation</a></li>
<li><a class="reference internal" href="#keyboard-navigation-and-highlighting">7.3.2. Keyboard Navigation and Highlighting</a></li>
<li><a class="reference internal" href="#header-and-footer">7.3.3. Header and Footer</a></li>
<li><a class="reference internal" href="#the-gridview">7.3.4. The GridView</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delegate">7.4. Delegate</a><ul>
<li><a class="reference internal" href="#animating-added-and-removed-items">7.4.1. Animating Added and Removed Items</a></li>
<li><a class="reference internal" href="#shape-shifting-delegates">7.4.2. Shape-Shifting Delegates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-techniques">7.5. Advanced Techniques</a><ul>
<li><a class="reference internal" href="#the-pathview">7.5.1. The PathView</a></li>
<li><a class="reference internal" href="#table-models">7.5.2. Table Models</a></li>
<li><a class="reference internal" href="#a-model-from-xml">7.5.3. A Model from XML</a></li>
<li><a class="reference internal" href="#lists-with-sections">7.5.4. Lists with Sections</a></li>
<li><a class="reference internal" href="#the-objectmodel">7.5.5. The ObjectModel</a></li>
<li><a class="reference internal" href="#models-with-actions">7.5.6. Models with Actions</a></li>
<li><a class="reference internal" href="#tuning-performance">7.5.7. Tuning Performance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">7.6. Summary</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="model-view-delegate">
<h1>7. Model-View-Delegate<a class="headerlink" href="#model-view-delegate" title="Permalink to this headline">¶</a></h1>
<p><em>Section author: <a class="reference external" href="https://bitbucket.org/e8johan">e8johan</a></em></p>
<p><div class="btn-group btn-group-justified" role="group"><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook/" target="_blank">Github</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//blob/master/docs/ch07-modelview/modelview.rst" target="_blank"><i class="glyphicon glyphicon-file"></i> View</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//edit/master/docs/ch07-modelview/modelview.rst" target="_blank"><i class="glyphicon glyphicon-pencil"></i> Edit</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues/new?labels=ch07&body=back-link%3A+ch07-modelview%2Fmodelview.html%23model-view-delegate" target="_blank"><i class="glyphicon glyphicon-plus"></i> Issue </a><a  class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues?labels=ch07&page=1&state=open" target="_blank"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Last Build: November 10, 2020 at 08:11 CET</p>
<p class="last">The source code for this chapter can be found in the <a class="reference external" href="../assets">assets folder</a>.</p>
</div>
<p>In Qt Quick, data is separated from the presentation through a model-view separation. For each view, the visualization of each data element is separated into a delegate. Qt Quick comes with a set of predefined models and views. To utilize the system, one must understand these classes and know how to create appropriate delegates to get the right look and feel.</p>
<div class="section" id="concept">
<h2>7.1. Concept<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23concept"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>One of the most important aspects when developing user interfaces is to keep the representation of the data separate from the visualization. For instance, a phonebook could be arranged as a vertical list of text entries or a grid of pictures of the contacts. In both cases, the data is identical: the phonebook, but the visualization differs. This division is commonly referred to as the model-view pattern. In this pattern, the data is referred to as the model, while the visualization is handled by the view.</p>
<p>In QML, the model and view are joined by the delegate. The responsibilies are divided as follows. The model provides the data. For each data item, there might be multiple values. In the example above, each phonebook entry has a name, a picture, and a number. The data is arranged in a view, in which each item is visualized using a delegate. The task of the view is to arrange the delegates, while each delegate shows the values of each model item to the user.</p>
<img src="../_images/graphviz-76f98f96418c992f22d1ac5c85ba1d829f7a5e62.png" alt="digraph model_view_delegate_roles {
View -&gt; Model [label=&quot;Visualizes Model&quot;]
Delegate -&gt; Model [label=&quot;Visualizes Model Rows&quot;]
View -&gt; Delegate [label=&quot;Creates and Places&quot;]
}" />
</div>
<div class="section" id="basic-models">
<h2>7.2. Basic Models<a class="headerlink" href="#basic-models" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23basic-models"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The most basic way to separate the data from the presentation is to use the <code class="docutils literal notranslate"><span class="pre">Repeater</span></code> element. It is used to instantiate an array of items and is easy to combine with a positioner to populate a part of the user interface. A repeater uses a model, which can be anything from the number of items to instantiate, to a full-blown model gathering data from the Internet.</p>
<p>In its simplest form, the repeater can be used to instantiate a specified number of items. Each item will have access to an attached property, the variable <code class="docutils literal notranslate"><span class="pre">index</span></code>, that can be used to tell the items apart. In the example below, a repeater is used to create 10 instances of an item. The number of items is controlled using the <code class="docutils literal notranslate"><span class="pre">model</span></code> property. For each item, the <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> containing a <code class="docutils literal notranslate"><span class="pre">Text</span></code> element found inside the <code class="docutils literal notranslate"><span class="pre">Repeater</span></code> item, is instantiated. As you can tell, the <code class="docutils literal notranslate"><span class="pre">text</span></code> property is set to the <code class="docutils literal notranslate"><span class="pre">index</span></code> value, thus the items are numbered from zero to nine.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Column</span> <span class="p">{</span>
    <span class="k">spacing:</span> <span class="mi">2</span>

    <span class="nx">Repeater</span> <span class="p">{</span>
        <span class="k">model:</span> <span class="mi">10</span>
        <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">120</span>
            <span class="k">height:</span> <span class="mi">32</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure" id="ex01">
<a class="reference internal image-reference" href="../_images/repeater-number.png"><img alt="../_images/repeater-number.png" src="../_images/repeater-number.png" style="width: 142.0px; height: 360.0px;" /></a>
</div>
<p>As nice as lists of numbered items are, it is sometimes interesting to display a more complex data set. By replacing the integer <code class="docutils literal notranslate"><span class="pre">model</span></code> value with a JavaScript array, we can achieve that. The contents of the array can be of any type, be it strings, integers or objects. In the example below, a list of strings is used. We can still access and use the <code class="docutils literal notranslate"><span class="pre">index</span></code> variable, but we also have access to <code class="docutils literal notranslate"><span class="pre">modelData</span></code> containing the data for each element in the array.</p>
<div class="highlight-qml notranslate" id="ex02"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Column</span> <span class="p">{</span>
    <span class="k">spacing:</span> <span class="mi">2</span>

    <span class="nx">Repeater</span> <span class="p">{</span>
        <span class="k">model:</span> <span class="p">[</span><span class="s2">&quot;Enterprise&quot;</span><span class="p">,</span> <span class="s2">&quot;Columbia&quot;</span><span class="p">,</span> <span class="s2">&quot;Challenger&quot;</span><span class="p">,</span> <span class="s2">&quot;Discovery&quot;</span><span class="p">,</span> <span class="s2">&quot;Endeavour&quot;</span><span class="p">,</span> <span class="s2">&quot;Atlantis&quot;</span><span class="p">]</span>

        <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">100</span>
            <span class="k">height:</span> <span class="mi">32</span>
            <span class="k">radius:</span> <span class="mi">3</span>

            <span class="k">text:</span> <span class="nx">modelData</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/repeater-array.png"><img alt="../_images/repeater-array.png" src="../_images/repeater-array.png" style="width: 122.0px; height: 224.0px;" /></a>
</div>
<p>Being able to expose the data of an array, you soon find yourself in a position where you need multiple pieces of data per item in the array. This is where models enter the picture. One of the most trivial models and one of the most commonly used is the <code class="docutils literal notranslate"><span class="pre">ListModel</span></code>. A list model is simply a collection of <code class="docutils literal notranslate"><span class="pre">ListElement</span></code> items. Inside each list element, a number of properties can be bound to values. For instance, in the example below, a name and a color are provided for each element.</p>
<p>The properties bound inside each element are attached to each instantiated item by the repeater. This means that the variables <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">surfaceColor</span></code> are available from within the scope of each <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> and <code class="docutils literal notranslate"><span class="pre">Text</span></code> item created by the repeater. This not only makes it easy to access the data, it also makes it easy to read the source code. The <code class="docutils literal notranslate"><span class="pre">surfaceColor</span></code> is the color of the circle to the left of the name, not something obscure as data from column <code class="docutils literal notranslate"><span class="pre">i</span></code> of row <code class="docutils literal notranslate"><span class="pre">j</span></code>.</p>
<div class="highlight-qml notranslate" id="ex03"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Column</span> <span class="p">{</span>
    <span class="k">spacing:</span> <span class="mi">2</span>

    <span class="nx">Repeater</span> <span class="p">{</span>
        <span class="k">model:</span> <span class="nx">ListModel</span> <span class="p">{</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Mercury&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;gray&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Venus&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;yellow&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Earth&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;blue&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Mars&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;orange&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Jupiter&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;orange&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Saturn&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;yellow&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Uranus&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;lightBlue&quot;</span> <span class="p">}</span>
            <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Neptune&quot;</span><span class="p">;</span> <span class="k">surfaceColor:</span> <span class="s2">&quot;lightBlue&quot;</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">120</span>
            <span class="k">height:</span> <span class="mi">32</span>

            <span class="k">radius:</span> <span class="mi">3</span>
            <span class="k">text:</span> <span class="nx">name</span>

            <span class="nx">Box</span> <span class="p">{</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
                <span class="k">anchors.leftMargin:</span> <span class="mi">4</span>

                <span class="k">width:</span> <span class="mi">16</span>
                <span class="k">height:</span> <span class="mi">16</span>

                <span class="k">radius:</span> <span class="mi">8</span>

                <span class="k">color:</span> <span class="nx">surfaceColor</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/repeater-model.png"><img alt="../_images/repeater-model.png" src="../_images/repeater-model.png" style="width: 142.0px; height: 292.0px;" /></a>
</div>
<p>The contents of the repeater that is being instantiated for each item is actually what is bound to the default property, <code class="docutils literal notranslate"><span class="pre">delegate</span></code>. This means that the code of example <a class="reference internal" href="#ex01"><span class="std std-ref">Example 01</span></a> is synonymous to the code shown below. Notice that the only difference is that the <code class="docutils literal notranslate"><span class="pre">delegate</span></code> property name is spelled out explicitly in the latter.</p>
<div class="highlight-qml notranslate" id="ex04"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Column</span> <span class="p">{</span>
    <span class="k">spacing:</span> <span class="mi">2</span>

    <span class="nx">Repeater</span> <span class="p">{</span>
        <span class="k">model:</span> <span class="mi">10</span>

        <span class="k">delegate:</span> <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">100</span>
            <span class="k">height:</span> <span class="mi">32</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-views">
<h2>7.3. Dynamic Views<a class="headerlink" href="#dynamic-views" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23dynamic-views"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Repeaters work well for limited and static sets of data, but in the real world, models are commonly more complex – and larger. Here, a smarter solution is needed. For this, Qt Quick provides the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> and <code class="docutils literal notranslate"><span class="pre">GridView</span></code> elements. These are both based on a <code class="docutils literal notranslate"><span class="pre">Flickable</span></code> area, so the user can move around in a larger dataset. At the same time, they limit the number of concurrently instantiated delegates. For a large model, that means fewer elements in the scene at once.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-basic.png"><img alt="../_images/listview-basic.png" src="../_images/listview-basic.png" style="width: 82.0px; height: 302.0px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/gridview-basic.png"><img alt="../_images/gridview-basic.png" src="../_images/gridview-basic.png" style="width: 222.0px; height: 302.0px;" /></a>
</div>
<p>The two elements are similar in their usage. Thus, we will begin with the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> and then describe the <code class="docutils literal notranslate"><span class="pre">GridView</span></code> with the former as the starting point of the comparison. Notice that the <code class="docutils literal notranslate"><span class="pre">GridView</span></code> places a list of items into a two-dimensional grid, left-to-right or top-to-bottom. If you want to show a table of data you need to use the <code class="docutils literal notranslate"><span class="pre">TableView</span></code> which is described in the <a class="reference internal" href="#table-models">Table Models</a> section.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ListView</span></code> is similar to the <code class="docutils literal notranslate"><span class="pre">Repeater</span></code> element. It uses a <code class="docutils literal notranslate"><span class="pre">model</span></code>, instantiates a <code class="docutils literal notranslate"><span class="pre">delegate</span></code> and between the delegates, there can be <code class="docutils literal notranslate"><span class="pre">spacing</span></code>. The listing below shows how a simple setup can look.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">80</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="mi">100</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
        <span class="k">spacing:</span> <span class="mi">5</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">GreenBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">40</span>
            <span class="k">height:</span> <span class="mi">40</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-basic.png"><img alt="../_images/listview-basic.png" src="../_images/listview-basic.png" style="width: 82.0px; height: 302.0px;" /></a>
</div>
<p>If the model contains more data than can fit onto the screen, the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> only shows part of the list. However, as a consequence of the default behavior of Qt Quick, the list view does not limit the screen area within which the delegates are shown. This means that delegates may be visible outside the list view and that the dynamic creation and destruction of delegates outside the list view is visible to the user. To prevent this, clipping must be activated on the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> element by setting the <code class="docutils literal notranslate"><span class="pre">clip</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code>. The illustration below shows the result of this (left view), compared to when the <code class="docutils literal notranslate"><span class="pre">clip</span></code> property is <code class="docutils literal notranslate"><span class="pre">false</span></code> (right view).</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-clip.png"><img alt="../_images/listview-clip.png" src="../_images/listview-clip.png" style="width: 142.0px; height: 302.0px;" /></a>
</div>
<p>To the user, the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> is a scrollable area. It supports kinetic scrolling, which means that it can be flicked to quickly move through the contents. By default, it also can be stretched beyond the end of contents, and then bounces back, to signal to the user that the end has been reached.</p>
<p>The behavior at the end of the view is controlled using the <code class="docutils literal notranslate"><span class="pre">boundsBehavior</span></code> property. This is an enumerated value and can be configured from the default behavior, <code class="docutils literal notranslate"><span class="pre">Flickable.DragAndOvershootBounds</span></code>, where the view can be both dragged and flicked outside its boundaries, to <code class="docutils literal notranslate"><span class="pre">Flickable.StopAtBounds</span></code>, where the view never will move outside its boundaries. The middle ground, <code class="docutils literal notranslate"><span class="pre">Flickable.DragOverBounds</span></code> lets the user drag the view outside its boundaries, but flicks will stop at the boundary.</p>
<p>It is possible to limit the positions where a view is allowed to stop. This is controlled using the <code class="docutils literal notranslate"><span class="pre">snapMode</span></code> property. The default behavior, <code class="docutils literal notranslate"><span class="pre">ListView.NoSnap</span></code>, lets the view stop at any position. By setting the <code class="docutils literal notranslate"><span class="pre">snapMode</span></code> property to <code class="docutils literal notranslate"><span class="pre">ListView.SnapToItem</span></code>, the view will always align the top of an item with its top. Finally, the <code class="docutils literal notranslate"><span class="pre">ListView.SnapOneItem</span></code>, the view will stop no more than one item from the first visible item when the mouse button or touch was released. The last mode is very handy when flipping through pages.</p>
<div class="section" id="orientation">
<h3>7.3.1. Orientation<a class="headerlink" href="#orientation" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23orientation"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The list view provides a vertically scrolling list by default, but horizontal scrolling can be just as useful. The direction of the list view is controlled through the <code class="docutils literal notranslate"><span class="pre">orientation</span></code> property. It can be set to either the default value, <code class="docutils literal notranslate"><span class="pre">ListView.Vertical</span></code>, or to <code class="docutils literal notranslate"><span class="pre">ListView.Horizontal</span></code>. A horizontal list view is shown below.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">480</span>
    <span class="k">height:</span> <span class="mi">80</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>
        <span class="k">spacing:</span> <span class="mi">4</span>
        <span class="k">clip:</span> <span class="kc">true</span>
        <span class="k">model:</span> <span class="mi">100</span>
        <span class="k">orientation:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">Horizontal</span>
        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">GreenBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">40</span>
            <span class="k">height:</span> <span class="mi">40</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-horizontal.png"><img alt="../_images/listview-horizontal.png" src="../_images/listview-horizontal.png" style="width: 482.0px; height: 82.0px;" /></a>
</div>
<p>As you can tell, the direction of the horizontal flows from the left to the right by default. This can be controlled through the <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code> property, which can be set to either <code class="docutils literal notranslate"><span class="pre">Qt.LeftToRight</span></code> or <code class="docutils literal notranslate"><span class="pre">Qt.RightToLeft</span></code>, depending on the flow direction.</p>
</div>
<div class="section" id="keyboard-navigation-and-highlighting">
<h3>7.3.2. Keyboard Navigation and Highlighting<a class="headerlink" href="#keyboard-navigation-and-highlighting" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23keyboard-navigation-and-highlighting"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>When using a <code class="docutils literal notranslate"><span class="pre">ListView</span></code> in a touch-based setting, the view itself is enough. In a scenario with a keyboard, or even just arrow keys to select an item, a mechanism to indicate the current item is needed. In QML, this is called highlighting.</p>
<p>Views support a highlight delegate which is shown in the view together with the delegates. It can be considered an additional delegate, only that it is only instantiated once, and is moved into the same position as the current item.</p>
<p>In the example below this is demonstrated. There are two properties involved for this to work. First, the <code class="docutils literal notranslate"><span class="pre">focus</span></code> property is set to true. This gives the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> the keyboard focus. Second, the <code class="docutils literal notranslate"><span class="pre">highlight</span></code> property is set to point out the highlighting delegate to use. The highlight delegate is given the <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> of the current item. If the <code class="docutils literal notranslate"><span class="pre">width</span></code> is not specified, the width of the current item is also used.</p>
<p>In the example, the <code class="docutils literal notranslate"><span class="pre">ListView.view.width</span></code> attached property is used for width. The attached properties available to delegates are discussed further in the delegate section of this chapter, but it is good to know that the same properties are available to highlight delegates as well.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">240</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="kd">id: view</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="mi">100</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
        <span class="k">spacing:</span> <span class="mi">5</span>

        <span class="k">highlight:</span> <span class="nx">highlightComponent</span>
        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: highlightComponent</span>

        <span class="nx">GreenBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">Item</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">40</span>

            <span class="nx">Text</span> <span class="p">{</span>
                <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>

                <span class="k">font.pixelSize:</span> <span class="mi">10</span>

                <span class="k">text:</span> <span class="nx">index</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-highlight.png"><img alt="../_images/listview-highlight.png" src="../_images/listview-highlight.png" style="width: 242.0px; height: 302.0px;" /></a>
</div>
<p>When using a highlight in conjunction with a <code class="docutils literal notranslate"><span class="pre">ListView</span></code>, a number of properties can be used to control its behavior. The <code class="docutils literal notranslate"><span class="pre">highlightRangeMode</span></code> controls how the highlight is affected by what is shown in the view. The default setting, <code class="docutils literal notranslate"><span class="pre">ListView.NoHighlightRange</span></code> means that the highlight and the visible range of items in the view not being related at all.</p>
<p>The value <code class="docutils literal notranslate"><span class="pre">ListView.StrictlyEnforceRange</span></code> ensures that the highlight is always visible. If an action attempts to move the highlight outside the visible part of the view, the current item will change accordingly, so that the highlight remains visible.</p>
<p>The middle ground is the <code class="docutils literal notranslate"><span class="pre">ListView.ApplyRange</span></code> value. It attempts to keep the highlight visible but does not alter the current item to enforce this. Instead, the highlight is allowed to move out of view if necessary.</p>
<p>In the default configuration, the view is responsible for moving the highlight into position. The speed of the movement and resizing can be controlled, either as a velocity or as a duration. The properties involved are <code class="docutils literal notranslate"><span class="pre">highlightMoveSpeed</span></code>, <code class="docutils literal notranslate"><span class="pre">highlightMoveDuration</span></code>, <code class="docutils literal notranslate"><span class="pre">highlightResizeSpeed</span></code> and <code class="docutils literal notranslate"><span class="pre">highlightResizeDuration</span></code>. By default, the speed is set to 400 pixels per second, and the duration is set to -1, indicating that the speed and distance control the duration. If both a speed and a duration is set, the one that results in the quickest animation is chosen.</p>
<p>To control the movement of the highlight more in detail, the <code class="docutils literal notranslate"><span class="pre">highlightFollowCurrentItem</span></code> property can be set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. This means that the view is no longer responsible for the movement of the highlight delegate. Instead, the movement can be controlled through a <code class="docutils literal notranslate"><span class="pre">Behavior</span></code> or an animation.</p>
<p>In the example below, the <code class="docutils literal notranslate"><span class="pre">y</span></code> property of the highlight delegate is bound to the <code class="docutils literal notranslate"><span class="pre">ListView.view.currentItem.y</span></code> attached property. This ensures that the highlight follows the current item. However, as we do not let the view move the highlight, we can control how the element is moved. This is done through the <code class="docutils literal notranslate"><span class="pre">Behavior</span> <span class="pre">on</span> <span class="pre">y</span></code>. In the example below, the movement is divided into three steps: fading out, moving, before fading in. Notice how <code class="docutils literal notranslate"><span class="pre">SequentialAnimation</span></code> and <code class="docutils literal notranslate"><span class="pre">PropertyAnimation</span></code> elements can be used in combination with the <code class="docutils literal notranslate"><span class="pre">NumberAnimation</span></code> to create a more complex movement.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: highlightComponent</span>

        <span class="nx">Item</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">currentItem</span><span class="p">.</span><span class="nx">height</span>

            <span class="k">y:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">currentItem</span><span class="p">.</span><span class="nx">y</span>

            <span class="nx">Behavior</span> <span class="nx">on</span> <span class="nx">y</span> <span class="p">{</span>
                <span class="nx">SequentialAnimation</span> <span class="p">{</span>
                    <span class="nx">PropertyAnimation</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">highlightRectangle</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;opacity&quot;</span><span class="p">;</span> <span class="k">to:</span> <span class="mi">0</span><span class="p">;</span> <span class="k">duration:</span> <span class="mi">200</span> <span class="p">}</span>
                    <span class="nx">NumberAnimation</span> <span class="p">{</span> <span class="k">duration:</span> <span class="mi">1</span> <span class="p">}</span>
                    <span class="nx">PropertyAnimation</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">highlightRectangle</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;opacity&quot;</span><span class="p">;</span> <span class="k">to:</span> <span class="mi">1</span><span class="p">;</span> <span class="k">duration:</span> <span class="mi">200</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">GreenBox</span> <span class="p">{</span>
                <span class="kd">id: highlightRectangle</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="header-and-footer">
<h3>7.3.3. Header and Footer<a class="headerlink" href="#header-and-footer" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23header-and-footer"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>At the end of the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> contents, a <code class="docutils literal notranslate"><span class="pre">header</span></code> and a <code class="docutils literal notranslate"><span class="pre">footer</span></code> element can be inserted. These can be considered special delegates placed at the beginning or end of the list. For a horizontal list, these will not appear at the head or foot, but rather at the beginning or end, depending on the <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code> used.</p>
<p>The example below illustrates how a header and footer can be used to enhance the perception of the beginning and end of a list. There are other uses for these special list elements. For instance, they can be used to keep buttons to load more contents.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">240</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="mi">4</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
        <span class="k">spacing:</span> <span class="mi">2</span>

        <span class="k">header:</span> <span class="nx">headerComponent</span>
        <span class="k">footer:</span> <span class="nx">footerComponent</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: headerComponent</span>

        <span class="nx">YellowBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">20</span>
            <span class="k">text:</span> <span class="s1">&#39;Header&#39;</span>

        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: footerComponent</span>

        <span class="nx">YellowBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">20</span>
            <span class="k">text:</span> <span class="s1">&#39;Footer&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">GreenBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">40</span>
            <span class="k">text:</span> <span class="s1">&#39;Item #&#39;</span> <span class="o">+</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Header and footer delegates do not respect the <code class="docutils literal notranslate"><span class="pre">spacing</span></code> property of a <code class="docutils literal notranslate"><span class="pre">ListView</span></code>, instead they are placed directly adjacent to the next item delegate in the list. This means that any spacing must be a part of the header and footer items.</p>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-header-footer.png"><img alt="../_images/listview-header-footer.png" src="../_images/listview-header-footer.png" style="width: 242.0px; height: 302.0px;" /></a>
</div>
</div>
<div class="section" id="the-gridview">
<h3>7.3.4. The GridView<a class="headerlink" href="#the-gridview" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23the-gridview"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Using a <code class="docutils literal notranslate"><span class="pre">GridView</span></code> is very similar to using a <code class="docutils literal notranslate"><span class="pre">ListView</span></code>. The only real difference is that the grid view places the delegates in a two-dimensional grid instead of in a linear list.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/gridview-basic.png"><img alt="../_images/gridview-basic.png" src="../_images/gridview-basic.png" style="width: 222.0px; height: 302.0px;" /></a>
</div>
<p>Compared to a list view, the grid view does not rely on spacing and the size of its delegates. Instead, it uses the <code class="docutils literal notranslate"><span class="pre">cellWidth</span></code> and <code class="docutils literal notranslate"><span class="pre">cellHeight</span></code> properties to control the dimensions of the contents delegates. Each delegate item is then placed in the top left corner of each such cell.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">220</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="nx">GridView</span> <span class="p">{</span>
        <span class="kd">id: view</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="mi">100</span>

        <span class="k">cellWidth:</span> <span class="mi">45</span>
        <span class="k">cellHeight:</span> <span class="mi">45</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">GreenBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="mi">40</span>
            <span class="k">height:</span> <span class="mi">40</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">GridView</span></code> contains headers and footers, can use a highlight delegate and supports snap modes as well as various bounds behaviors. It can also be orientated in different directions and orientations.</p>
<p>The orientation is controlled using the <code class="docutils literal notranslate"><span class="pre">flow</span></code> property. It can be set to either <code class="docutils literal notranslate"><span class="pre">GridView.LeftToRight</span></code> or <code class="docutils literal notranslate"><span class="pre">GridView.TopToBottom</span></code>. The former value fills a grid from the left to the right, adding rows from the top to the bottom. The view is scrollable in the vertical direction. The latter value adds items from the top to the bottom, filling the view from left to right. The scrolling direction is horizontal in this case.</p>
<p>In addition to the <code class="docutils literal notranslate"><span class="pre">flow</span></code> property, the <code class="docutils literal notranslate"><span class="pre">layoutDirection</span></code> property can adapt the direction of the grid to left-to-right or right-to-left languages, depending on the value used.</p>
</div>
</div>
<div class="section" id="delegate">
<h2>7.4. Delegate<a class="headerlink" href="#delegate" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23delegate"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>When it comes to using models and views in a custom user interface, the delegate plays a huge role in creating a look. As each item in a model is visualized through a delegate, what is actually visible to the user are the delegates.</p>
<p>Each delegate gets access to a number of attached properties, some from the data model, others from the view. From the model, the properties convey the data for each item to the delegate. From the view, the properties convey state information related to the delegate within the view.</p>
<p>The most commonly used properties attached from the view are <code class="docutils literal notranslate"><span class="pre">ListView.isCurrentItem</span></code> and <code class="docutils literal notranslate"><span class="pre">ListView.view</span></code>. The first is a boolean indicating if the item is the current item, while the latter is a read-only reference to the actual view. Through access to the view, it is possible to create general, reusable delegates that adapt to the size and nature of the view in which they are contained. In the example below, the <code class="docutils literal notranslate"><span class="pre">width</span></code> of each delegate is bound to the <code class="docutils literal notranslate"><span class="pre">width</span></code> of the view, while the background <code class="docutils literal notranslate"><span class="pre">color</span></code> of each delegate depends on the attached <code class="docutils literal notranslate"><span class="pre">ListView.isCurrentItem</span></code> property.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">120</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#f6f6f6&quot;</span> <span class="p">}</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#d7d7d7&quot;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="mi">100</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
        <span class="k">spacing:</span> <span class="mi">5</span>

        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">Rectangle</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">40</span>

            <span class="k">color:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">isCurrentItem</span><span class="o">?</span><span class="s2">&quot;#157efb&quot;</span><span class="o">:</span><span class="s2">&quot;#53d769&quot;</span>
            <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>

            <span class="nx">Text</span> <span class="p">{</span>
                <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>

                <span class="k">font.pixelSize:</span> <span class="mi">10</span>

                <span class="k">text:</span> <span class="nx">index</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delegates-basic.png"><img alt="../_images/delegates-basic.png" src="../_images/delegates-basic.png" style="width: 142.0px; height: 322.0px;" /></a>
</div>
<p>If each item in the model is associated with an action, for instance, clicking an item acts upon it, that functionality is a part of each delegate. This divides the event management between the view, which handles the navigation between items in the view, and the delegate which handles actions on a specific item.</p>
<p>The most basic way to do this is to create a <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code> within each delegate and act on the <code class="docutils literal notranslate"><span class="pre">onClicked</span></code> signal. This is demonstrated in the example in the next section of this chapter.</p>
<div class="section" id="animating-added-and-removed-items">
<h3>7.4.1. Animating Added and Removed Items<a class="headerlink" href="#animating-added-and-removed-items" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23animating-added-and-removed-items"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>In some cases, the contents shown in a view changes over time. Items are added and removed as the underlying data model is altered. In these cases, it is often a good idea to employ visual cues to give the user a sense of direction and to help the user understand what data is added or removed.</p>
<p>Conveniently enough, QML views attach two signals, <code class="docutils literal notranslate"><span class="pre">onAdd</span></code> and <code class="docutils literal notranslate"><span class="pre">onRemove</span></code>, to each item delegate. By connecting animations to these, it is easy to create the movement necessary to aid the user in identifying what is taking place.</p>
<p>The example below demonstrates this through the use of a dynamically populated <code class="docutils literal notranslate"><span class="pre">ListModel</span></code>. At the bottom of the screen, a button for adding new items is shown. When it is clicked, a new item is added to the model using the <code class="docutils literal notranslate"><span class="pre">append</span></code> method. This triggers the creation of a new delegate in the view, and the emission of the <code class="docutils literal notranslate"><span class="pre">GridView.onAdd</span></code> signal. The <code class="docutils literal notranslate"><span class="pre">SequentialAnimation</span></code> attached to the signal causes the item to zoom into view by animating the <code class="docutils literal notranslate"><span class="pre">scale</span></code> property of the delegate.</p>
<p>When a delegate in the view is clicked, the item is removed from the model through a call to the <code class="docutils literal notranslate"><span class="pre">remove</span></code> method. This causes the <code class="docutils literal notranslate"><span class="pre">GridView.onRemove</span></code> signal to be emitted, triggering another <code class="docutils literal notranslate"><span class="pre">SequentialAnimation</span></code>. This time, however, the destruction of the delegate must be delayed until the animation has completed. To do this, <code class="docutils literal notranslate"><span class="pre">PropertyAction</span></code> element is used to set the <code class="docutils literal notranslate"><span class="pre">GridView.delayRemove</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code> before the animation, and <code class="docutils literal notranslate"><span class="pre">false</span></code> after. This ensures that the animation is allowed to complete before the delegate item is removed.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">480</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#dbddde&quot;</span> <span class="p">}</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#5fc9f8&quot;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ListModel</span> <span class="p">{</span>
        <span class="kd">id: theModel</span>

        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">0</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">1</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">2</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">3</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">4</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">5</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">6</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">7</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">8</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">number:</span> <span class="mi">9</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
        <span class="k">anchors.right:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
        <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">height:</span> <span class="mi">40</span>

        <span class="k">color:</span> <span class="s2">&quot;#53d769&quot;</span>
        <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>

        <span class="nx">Text</span> <span class="p">{</span>
            <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>

            <span class="k">text:</span> <span class="s2">&quot;Add item!&quot;</span>
        <span class="p">}</span>

        <span class="nx">MouseArea</span> <span class="p">{</span>
            <span class="k">anchors.fill:</span> <span class="nx">parent</span>

            <span class="k">onClicked:</span> <span class="p">{</span>
                <span class="nx">theModel</span><span class="p">.</span><span class="nx">append</span><span class="p">({</span><span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="o">++</span><span class="nx">parent</span><span class="p">.</span><span class="nx">count</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">property</span> <span class="kr">int</span> <span class="k">count:</span> <span class="mi">9</span>
    <span class="p">}</span>

    <span class="nx">GridView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>
        <span class="k">anchors.bottomMargin:</span> <span class="mi">80</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="nx">theModel</span>

        <span class="k">cellWidth:</span> <span class="mi">45</span>
        <span class="k">cellHeight:</span> <span class="mi">45</span>

        <span class="k">delegate:</span> <span class="nx">numberDelegate</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: numberDelegate</span>

        <span class="nx">Rectangle</span> <span class="p">{</span>
            <span class="kd">id: wrapper</span>

            <span class="k">width:</span> <span class="mi">40</span>
            <span class="k">height:</span> <span class="mi">40</span>

            <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
                <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#f8306a&quot;</span> <span class="p">}</span>
                <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#fb5b40&quot;</span> <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">Text</span> <span class="p">{</span>
                <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>

                <span class="k">font.pixelSize:</span> <span class="mi">10</span>

                <span class="k">text:</span> <span class="nx">number</span>
            <span class="p">}</span>

            <span class="nx">MouseArea</span> <span class="p">{</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>

                <span class="k">onClicked:</span> <span class="p">{</span>
                    <span class="nx">theModel</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">GridView.onRemove:</span> <span class="nx">SequentialAnimation</span> <span class="p">{</span>
                <span class="nx">PropertyAction</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;GridView.delayRemove&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="kc">true</span> <span class="p">}</span>
                <span class="nx">NumberAnimation</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;scale&quot;</span><span class="p">;</span> <span class="k">to:</span> <span class="mi">0</span><span class="p">;</span> <span class="k">duration:</span> <span class="mi">250</span><span class="p">;</span> <span class="k">easing.type:</span> <span class="nx">Easing</span><span class="p">.</span><span class="nx">InOutQuad</span> <span class="p">}</span>
                <span class="nx">PropertyAction</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;GridView.delayRemove&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="kc">false</span> <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">GridView.onAdd:</span> <span class="nx">SequentialAnimation</span> <span class="p">{</span>
                <span class="nx">NumberAnimation</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">;</span> <span class="k">property:</span> <span class="s2">&quot;scale&quot;</span><span class="p">;</span> <span class="k">from:</span> <span class="mi">0</span><span class="p">;</span> <span class="k">to:</span> <span class="mi">1</span><span class="p">;</span> <span class="k">duration:</span> <span class="mi">250</span><span class="p">;</span> <span class="k">easing.type:</span> <span class="nx">Easing</span><span class="p">.</span><span class="nx">InOutQuad</span> <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="shape-shifting-delegates">
<h3>7.4.2. Shape-Shifting Delegates<a class="headerlink" href="#shape-shifting-delegates" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23shape-shifting-delegates"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>A commonly used mechanism in lists is that the current item is expanded when activated. This can be used to dynamically let the item expand to fill the screen to enter a new part of the user interface, or it can be used to provide slightly more information for the current item in a given list.</p>
<p>In the example below, each item is expanded to the full extent of the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> containing it when clicked. The extra space is then used to add more information. The mechanism used to control this is a state <code class="docutils literal notranslate"><span class="pre">expanded</span></code> that each item delegate can enter, where the item is expanded. In that state, a number of properties are altered.</p>
<p>First of all, the <code class="docutils literal notranslate"><span class="pre">height</span></code> of the <code class="docutils literal notranslate"><span class="pre">wrapper</span></code> is set to the height of the <code class="docutils literal notranslate"><span class="pre">ListView</span></code>. The thumbnail image is then enlarged and moved down to make it move from its small position into its larger position. In addition to this, the two hidden items, the <code class="docutils literal notranslate"><span class="pre">factsView</span></code> and <code class="docutils literal notranslate"><span class="pre">closeButton</span></code> are shown by altering the <code class="docutils literal notranslate"><span class="pre">opacity</span></code> of the elements. Finally, the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> is setup.</p>
<p>Setting up the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> involves setting the <code class="docutils literal notranslate"><span class="pre">contentsY</span></code>, that is the top of the visible part of the view, to the <code class="docutils literal notranslate"><span class="pre">y</span></code> value of the delegate. The other change is to set <code class="docutils literal notranslate"><span class="pre">interactive</span></code> of the view to <code class="docutils literal notranslate"><span class="pre">false</span></code>. This prevents the view from moving. The user can no longer scroll through the list or change the current item.</p>
<p>As the item first is clicked, it enters the <code class="docutils literal notranslate"><span class="pre">expanded</span></code> state, causing the item delegate to fill the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> and the contents to rearrange. When the close button is clicked, the state is cleared, causing the delegate to return to its previous state and re-enabling the <code class="docutils literal notranslate"><span class="pre">ListView</span></code>.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>

<span class="nx">Item</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">300</span>
    <span class="k">height:</span> <span class="mi">480</span>

    <span class="nx">Rectangle</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
            <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#4a4a4a&quot;</span> <span class="p">}</span>
            <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#2b2b2b&quot;</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="kd">id: listView</span>

        <span class="k">anchors.fill:</span> <span class="nx">parent</span>

        <span class="k">delegate:</span> <span class="nx">detailsDelegate</span>
        <span class="k">model:</span> <span class="nx">planets</span>
    <span class="p">}</span>

    <span class="nx">ListModel</span> <span class="p">{</span>
        <span class="kd">id: planets</span>

        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Mercury&quot;</span><span class="p">;</span> <span class="k">imageSource:</span> <span class="s2">&quot;images/mercury.jpeg&quot;</span><span class="p">;</span> <span class="k">facts:</span> <span class="s2">&quot;Mercury is the smallest planet in the Solar System. It is the closest planet to the sun. It makes one trip around the Sun once every 87.969 days.&quot;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Venus&quot;</span><span class="p">;</span> <span class="k">imageSource:</span> <span class="s2">&quot;images/venus.jpeg&quot;</span><span class="p">;</span> <span class="k">facts:</span> <span class="s2">&quot;Venus is the second planet from the Sun. It is a terrestrial planet because it has a solid, rocky surface. The other terrestrial planets are Mercury, Earth and Mars. Astronomers have known Venus for thousands of years.&quot;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Earth&quot;</span><span class="p">;</span> <span class="k">imageSource:</span> <span class="s2">&quot;images/earth.jpeg&quot;</span><span class="p">;</span> <span class="k">facts:</span> <span class="s2">&quot;The Earth is the third planet from the Sun. It is one of the four terrestrial planets in our Solar System. This means most of its mass is solid. The other three are Mercury, Venus and Mars. The Earth is also called the Blue Planet, &#39;Planet Earth&#39;, and &#39;Terra&#39;.&quot;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Mars&quot;</span><span class="p">;</span> <span class="k">imageSource:</span> <span class="s2">&quot;images/mars.jpeg&quot;</span><span class="p">;</span> <span class="k">facts:</span> <span class="s2">&quot;Mars is the fourth planet from the Sun in the Solar System. Mars is dry, rocky and cold. It is home to the largest volcano in the Solar System. Mars is named after the mythological Roman god of war because it is a red planet, which signifies the colour of blood.&quot;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: detailsDelegate</span>

        <span class="nx">Item</span> <span class="p">{</span>
            <span class="kd">id: wrapper</span>

            <span class="k">width:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">30</span>

            <span class="nx">Rectangle</span> <span class="p">{</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                <span class="k">anchors.right:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
                <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>

                <span class="k">height:</span> <span class="mi">30</span>

                <span class="k">color:</span> <span class="s2">&quot;#333&quot;</span>
                <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>
                <span class="nx">Text</span> <span class="p">{</span>
                    <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                    <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
                    <span class="k">anchors.leftMargin:</span> <span class="mi">4</span>

                    <span class="k">font.pixelSize:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="mi">4</span>
                    <span class="k">color:</span> <span class="s1">&#39;#fff&#39;</span>

                    <span class="k">text:</span> <span class="nx">name</span>
                <span class="p">}</span>
            <span class="p">}</span>


            <span class="nx">Rectangle</span> <span class="p">{</span>
                <span class="kd">id: image</span>

                <span class="k">width:</span> <span class="mi">26</span>
                <span class="k">height:</span> <span class="mi">26</span>

                <span class="k">anchors.right:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
                <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
                <span class="k">anchors.rightMargin:</span> <span class="mi">2</span>
                <span class="k">anchors.topMargin:</span> <span class="mi">2</span>

                <span class="k">color:</span> <span class="s2">&quot;black&quot;</span>


                <span class="nx">Image</span> <span class="p">{</span>
                    <span class="k">anchors.fill:</span> <span class="nx">parent</span>

                    <span class="k">fillMode:</span> <span class="nx">Image</span><span class="p">.</span><span class="nx">PreserveAspectFit</span>

                    <span class="k">source:</span> <span class="nx">imageSource</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">MouseArea</span> <span class="p">{</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                <span class="k">onClicked:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="s2">&quot;expanded&quot;</span>
            <span class="p">}</span>

            <span class="nx">Item</span> <span class="p">{</span>
                <span class="kd">id: factsView</span>

                <span class="k">anchors.top:</span> <span class="nx">image</span><span class="p">.</span><span class="nx">bottom</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                <span class="k">anchors.right:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
                <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>

                <span class="k">opacity:</span> <span class="mi">0</span>

                <span class="nx">Rectangle</span> <span class="p">{</span>
                    <span class="k">anchors.fill:</span> <span class="nx">parent</span>

                    <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
                        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#fed958&quot;</span> <span class="p">}</span>
                        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#fecc2f&quot;</span> <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">border.color:</span> <span class="s1">&#39;#000000&#39;</span>
                    <span class="k">border.width:</span> <span class="mi">2</span>

                    <span class="nx">Text</span> <span class="p">{</span>
                        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                        <span class="k">anchors.margins:</span> <span class="mi">5</span>

                        <span class="k">clip:</span> <span class="kc">true</span>
                        <span class="k">wrapMode:</span> <span class="nx">Text</span><span class="p">.</span><span class="nx">WordWrap</span>
                        <span class="k">color:</span> <span class="s1">&#39;#1f1f21&#39;</span>

                        <span class="k">font.pixelSize:</span> <span class="mi">12</span>

                        <span class="k">text:</span> <span class="nx">facts</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">Rectangle</span> <span class="p">{</span>
                <span class="kd">id: closeButton</span>

                <span class="k">anchors.right:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span>
                <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
                <span class="k">anchors.rightMargin:</span> <span class="mi">2</span>
                <span class="k">anchors.topMargin:</span> <span class="mi">2</span>

                <span class="k">width:</span> <span class="mi">26</span>
                <span class="k">height:</span> <span class="mi">26</span>

                <span class="k">color:</span> <span class="s2">&quot;#157efb&quot;</span>
                <span class="k">border.color:</span> <span class="nx">Qt</span><span class="p">.</span><span class="nx">lighter</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>

                <span class="k">opacity:</span> <span class="mi">0</span>

                <span class="nx">MouseArea</span> <span class="p">{</span>
                    <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                    <span class="k">onClicked:</span> <span class="nx">wrapper</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">states:</span> <span class="p">[</span>
                <span class="nx">State</span> <span class="p">{</span>
                    <span class="k">name:</span> <span class="s2">&quot;expanded&quot;</span>

                    <span class="nx">PropertyChanges</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">;</span> <span class="k">height:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">height</span> <span class="p">}</span>
                    <span class="nx">PropertyChanges</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">image</span><span class="p">;</span> <span class="k">width:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">anchors.rightMargin:</span> <span class="mi">0</span><span class="p">;</span> <span class="k">anchors.topMargin:</span> <span class="mi">30</span> <span class="p">}</span>
                    <span class="nx">PropertyChanges</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">factsView</span><span class="p">;</span> <span class="k">opacity:</span> <span class="mi">1</span> <span class="p">}</span>
                    <span class="nx">PropertyChanges</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">closeButton</span><span class="p">;</span> <span class="k">opacity:</span> <span class="mi">1</span> <span class="p">}</span>
                    <span class="nx">PropertyChanges</span> <span class="p">{</span> <span class="k">target:</span> <span class="nx">wrapper</span><span class="p">.</span><span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">;</span> <span class="k">contentY:</span> <span class="nx">wrapper</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span> <span class="k">interactive:</span> <span class="kc">false</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">]</span>

            <span class="k">transitions:</span> <span class="p">[</span>
                <span class="nx">Transition</span> <span class="p">{</span>
                    <span class="nx">NumberAnimation</span> <span class="p">{</span>
                        <span class="k">duration:</span> <span class="mi">200</span><span class="p">;</span>
                        <span class="k">properties:</span> <span class="s2">&quot;height,width,anchors.rightMargin,anchors.topMargin,opacity,contentY&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delegates-expanding-small.png"><img alt="../_images/delegates-expanding-small.png" src="../_images/delegates-expanding-small.png" style="width: 302.0px; height: 482.0px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delegates-expanding-large.png"><img alt="../_images/delegates-expanding-large.png" src="../_images/delegates-expanding-large.png" style="width: 302.0px; height: 482.0px;" /></a>
</div>
<p>The techniques demonstrated here to expand the delegate to fill the entire view can be employed to make an item delegate shift shape in a much smaller way. For instance, when browsing through a list of songs, the current item could be made slightly larger, accommodating more information about that particular item.</p>
</div>
</div>
<div class="section" id="advanced-techniques">
<h2>7.5. Advanced Techniques<a class="headerlink" href="#advanced-techniques" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23advanced-techniques"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="section" id="the-pathview">
<h3>7.5.1. The PathView<a class="headerlink" href="#the-pathview" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23the-pathview"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The <code class="docutils literal notranslate"><span class="pre">PathView</span></code> element is the most powerful, but also the most complex, view provided in Qt Quick. It makes it possible to create a view where the items are laid out along an arbitrary path. Along the same path, attributes such as scale, opacity and more can be controlled in detail.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">PathView</span></code>, you have to define a delegate and a path. In addition to this, the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> itself can be customized through a range of properties. The most common being <code class="docutils literal notranslate"><span class="pre">pathItemCount</span></code>, controlling the number of visible items at once, and the highlight range control properties <code class="docutils literal notranslate"><span class="pre">preferredHighlightBegin</span></code>, <code class="docutils literal notranslate"><span class="pre">preferredHighlightEnd</span></code> and <code class="docutils literal notranslate"><span class="pre">highlightRangeMode</span></code>, controlling where along the path the current item is to be shown.</p>
<p>Before looking at the highlight range control properties in depth, we must look at the <code class="docutils literal notranslate"><span class="pre">path</span></code> property. The <code class="docutils literal notranslate"><span class="pre">path</span></code> property expects a <code class="docutils literal notranslate"><span class="pre">Path</span></code> element defining the path that the delegates follow as the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> is being scrolled. The path is defined using the <code class="docutils literal notranslate"><span class="pre">startX</span></code> and <code class="docutils literal notranslate"><span class="pre">startY</span></code> properties in combinations with path elements such as <code class="docutils literal notranslate"><span class="pre">PathLine</span></code>, <code class="docutils literal notranslate"><span class="pre">PathQuad</span></code> and <code class="docutils literal notranslate"><span class="pre">PathCubic</span></code>.  These elements are joined together to form a two-dimensional path.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">do we cover the line, quad, and cubic through an illustration, or do we need a paragraph on them?</p>
</div>
<p>When the path has been defined, it is possible to further tune it using <code class="docutils literal notranslate"><span class="pre">PathPercent</span></code> and <code class="docutils literal notranslate"><span class="pre">PathAttribute</span></code> elements. These are placed in between path elements and provide more fine-grained control over the path and the delegates on it. The <code class="docutils literal notranslate"><span class="pre">PathPercent</span></code> controls how large a portion of the path that has been covered between each element. This, in turn, controls the distribution of delegates along the path, as they are distributed proportionally to the percentage progressed.</p>
<p>This is where the <code class="docutils literal notranslate"><span class="pre">preferredHighlightBegin</span></code> and <code class="docutils literal notranslate"><span class="pre">preferredHighlightEnd</span></code> properties of the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> enters the picture. They both expect real values in the range between zero and one. The end is also expected to be more or equal to the beginning. Setting both these properties too, for instance, 0.5, the current item will be displayed at the location fifty percent along the path.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">Path</span></code>, the <code class="docutils literal notranslate"><span class="pre">PathAttribute</span></code> elements are placed between elements, just as <code class="docutils literal notranslate"><span class="pre">PathPercent</span></code> elements. They let you specify property values that are interpolated along the path. These properties are attached to the delegates and can be used to control any conceivable property.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/pathview-coverview.png"><img alt="../_images/pathview-coverview.png" src="../_images/pathview-coverview.png" style="width: 102.0px; height: 302.0px;" /></a>
</div>
<p>The example below demonstrates how the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> element is used to create a view of cards that the user can flip through. It employs a number of tricks to do this. The path consists of three <code class="docutils literal notranslate"><span class="pre">PathLine</span></code> elements. Using <code class="docutils literal notranslate"><span class="pre">PathPercent</span></code> elements, the central element is properly centered and provided enough space not to be cluttered by other elements. Using <code class="docutils literal notranslate"><span class="pre">PathAttribute</span></code> elements, the rotation, size and <code class="docutils literal notranslate"><span class="pre">z</span></code>-value is controlled.</p>
<p>In addition to the <code class="docutils literal notranslate"><span class="pre">path</span></code>, the <code class="docutils literal notranslate"><span class="pre">pathItemCount</span></code> property of the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> has been set. This controls how densely populated the path will be. The <code class="docutils literal notranslate"><span class="pre">preferredHighlightBegin</span></code> and <code class="docutils literal notranslate"><span class="pre">preferredHighlightEnd</span></code> the <code class="docutils literal notranslate"><span class="pre">PathView.onPath</span></code> is used to control the visibility of the delegates.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">PathView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>

        <span class="k">delegate:</span> <span class="nx">flipCardDelegate</span>
        <span class="k">model:</span> <span class="mi">100</span>

        <span class="k">path:</span> <span class="nx">Path</span> <span class="p">{</span>
            <span class="k">startX:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span>
            <span class="k">startY:</span> <span class="mi">0</span>

            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemZ&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mi">0</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemAngle&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="o">-</span><span class="mf">90.0</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemScale&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mf">0.5</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathLine</span> <span class="p">{</span> <span class="k">x:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="k">y:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">height</span><span class="o">*</span><span class="mf">0.4</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathPercent</span> <span class="p">{</span> <span class="k">value:</span> <span class="mf">0.48</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathLine</span> <span class="p">{</span> <span class="k">x:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="k">y:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">height</span><span class="o">*</span><span class="mf">0.5</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemAngle&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemScale&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemZ&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mi">100</span> <span class="p">}</span>
            <span class="nx">PathLine</span> <span class="p">{</span> <span class="k">x:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="k">y:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">height</span><span class="o">*</span><span class="mf">0.6</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathPercent</span> <span class="p">{</span> <span class="k">value:</span> <span class="mf">0.52</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathLine</span> <span class="p">{</span> <span class="k">x:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="k">y:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemAngle&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mf">90.0</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemScale&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mf">0.5</span><span class="p">;</span> <span class="p">}</span>
            <span class="nx">PathAttribute</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;itemZ&quot;</span><span class="p">;</span> <span class="k">value:</span> <span class="mi">0</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">pathItemCount:</span> <span class="mi">16</span>

        <span class="k">preferredHighlightBegin:</span> <span class="mf">0.5</span>
        <span class="k">preferredHighlightEnd:</span> <span class="mf">0.5</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The delegate, shown below, utilizes the attached properties <code class="docutils literal notranslate"><span class="pre">itemZ</span></code>, <code class="docutils literal notranslate"><span class="pre">itemAngle</span></code> and <code class="docutils literal notranslate"><span class="pre">itemScale</span></code> from the <code class="docutils literal notranslate"><span class="pre">PathAttribute</span></code> elements. It is worth noticing that the attached properties of the delegate only are available from the <code class="docutils literal notranslate"><span class="pre">wrapper</span></code>. Thus, the <code class="docutils literal notranslate"><span class="pre">rotX</span></code> property is defined to be able to access the value from within the <code class="docutils literal notranslate"><span class="pre">Rotation</span></code> element.</p>
<p>Another detail specific to <code class="docutils literal notranslate"><span class="pre">PathView</span></code> worth noticing is the usage of the attached <code class="docutils literal notranslate"><span class="pre">PathView.onPath</span></code> property. It is common practice to bind the visibility to this, as this allows the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> to keep invisible elements for caching purposes. This can usually not be handled through clipping, as the item delegates of a <code class="docutils literal notranslate"><span class="pre">PathView</span></code> are placed more freely than the item delegates of <code class="docutils literal notranslate"><span class="pre">ListView</span></code> or <code class="docutils literal notranslate"><span class="pre">GridView</span></code> views.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: flipCardDelegate</span>

        <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="kd">id: wrapper</span>

            <span class="k">width:</span> <span class="mi">64</span>
            <span class="k">height:</span> <span class="mi">64</span>
            <span class="k">antialiasing:</span> <span class="kc">true</span>

            <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
                <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#2ed5fa&quot;</span> <span class="p">}</span>
                <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#2467ec&quot;</span> <span class="p">}</span>
            <span class="p">}</span>


            <span class="k">visible:</span> <span class="nx">PathView</span><span class="p">.</span><span class="nx">onPath</span>

            <span class="k">scale:</span> <span class="nx">PathView</span><span class="p">.</span><span class="nx">itemScale</span>
            <span class="k">z:</span> <span class="nx">PathView</span><span class="p">.</span><span class="nx">itemZ</span>

            <span class="nx">property</span> <span class="nx">variant</span> <span class="k">rotX:</span> <span class="nx">PathView</span><span class="p">.</span><span class="nx">itemAngle</span>
            <span class="k">transform:</span> <span class="nx">Rotation</span> <span class="p">{</span>
                <span class="nx">axis</span> <span class="p">{</span> <span class="k">x:</span> <span class="mi">1</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">0</span><span class="p">;</span> <span class="k">z:</span> <span class="mi">0</span> <span class="p">}</span>
                <span class="k">angle:</span> <span class="nx">wrapper</span><span class="p">.</span><span class="nx">rotX</span><span class="p">;</span>
                <span class="nx">origin</span> <span class="p">{</span> <span class="k">x:</span> <span class="mi">32</span><span class="p">;</span> <span class="k">y:</span> <span class="mi">32</span><span class="p">;</span> <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">text:</span> <span class="nx">index</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>When transforming images or other complex elements on in <code class="docutils literal notranslate"><span class="pre">PathView</span></code>, a performance optimization trick that is common to use is to bind the <code class="docutils literal notranslate"><span class="pre">smooth</span></code> property of the <code class="docutils literal notranslate"><span class="pre">Image</span></code> element to the attached property <code class="docutils literal notranslate"><span class="pre">PathView.view.moving</span></code>. This means that the images are less pretty while moving but smoothly transformed when stationary. There is no point spending processing power on smooth scaling when the view is in motion, as the user will not be able to see this anyway.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">PathView</span></code> and changing the <code class="docutils literal notranslate"><span class="pre">currentIndex</span></code> programatically you might want to control the direction that the path moves in. You can do this using the <code class="docutils literal notranslate"><span class="pre">movementDirection</span></code> property. It can be set to <code class="docutils literal notranslate"><span class="pre">PathView.Shortest</span></code>, which is the default value. This means that the movement can be either direction, depending on which way is the closest way to move to the target value. The direction can instead be restricted by setting <code class="docutils literal notranslate"><span class="pre">movementDirection</span></code> to <code class="docutils literal notranslate"><span class="pre">PathView.Negative</span></code> or <code class="docutils literal notranslate"><span class="pre">PathView.Positive</span></code>.</p>
</div>
<div class="section" id="table-models">
<h3>7.5.2. Table Models<a class="headerlink" href="#table-models" title="Permalink to this headline">¶</a></h3>
<p>All views discussed until now present an array of items one way or another. Even the <code class="docutils literal notranslate"><span class="pre">GridView</span></code> expects the model to provide a one dimensional list of items. For two dimensional tables of data you need to use the <code class="docutils literal notranslate"><span class="pre">TableView</span></code> element.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TableView</span></code> is similar to other views in that it combines a <code class="docutils literal notranslate"><span class="pre">model</span></code> with a <code class="docutils literal notranslate"><span class="pre">delegate</span></code> to form a grid. If given a list oriented model, it displays a single column, making it very similar to the <code class="docutils literal notranslate"><span class="pre">ListView</span></code> element. However, it can also display two-dimensional models that explicitly define both columns and rows.</p>
<p>In the example below, we set up a simple <code class="docutils literal notranslate"><span class="pre">TableView</span></code> with a custom model exposed from C++. At the moment, it is not possible to create table oriented models directly from QML, but in the ‘Qt and C++’ chapter the concept is explained. The running example is shown in the figure below.</p>
<div class="figure">
<img alt="../_images/tableview.png" src="../_images/tableview.png" />
</div>
<p>Before we can use the <code class="docutils literal notranslate"><span class="pre">TableView</span></code> element, we must make sure that the <code class="docutils literal notranslate"><span class="pre">2.12</span></code> version of <code class="docutils literal notranslate"><span class="pre">QtQuick</span></code> is imported. After that, we can set it up. In this example below, we set the <code class="docutils literal notranslate"><span class="pre">rowSpacing</span></code> and <code class="docutils literal notranslate"><span class="pre">columnSpacing</span></code> to control the horizontal and vertical gaps between delegates. The rest of the properties are set up as for any other type of view.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.12</span>
</pre></div>
</div>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">TableView</span> <span class="p">{</span>
    <span class="kd">id: view</span>
    <span class="k">anchors.fill:</span> <span class="nx">parent</span>
    <span class="k">anchors.margins:</span> <span class="mi">20</span>

    <span class="k">rowSpacing:</span> <span class="mi">5</span>
    <span class="k">columnSpacing:</span> <span class="mi">5</span>

    <span class="k">clip:</span> <span class="kc">true</span>

    <span class="k">model:</span> <span class="nx">tableModel</span>

    <span class="k">delegate:</span> <span class="nx">cellDelegate</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The delegate itself can carry an implicit size through the <code class="docutils literal notranslate"><span class="pre">implicitWidth</span></code> and <code class="docutils literal notranslate"><span class="pre">implicitHeight</span></code>. This is what we do in the example below. The actual data contents, i.e. the data returned from the model’s <code class="docutils literal notranslate"><span class="pre">display</span></code> role.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">Component</span> <span class="p">{</span>
    <span class="kd">id: cellDelegate</span>

    <span class="nx">GreenBox</span> <span class="p">{</span>
        <span class="k">implicitHeight:</span> <span class="mi">40</span>
        <span class="k">implicitWidth:</span> <span class="mi">40</span>

        <span class="nx">Text</span> <span class="p">{</span>
            <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
            <span class="k">text:</span> <span class="nx">display</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is possible to provide delegates with different sizes depending on the model contents, e.g.:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">GreenBox</span> <span class="p">{</span>
    <span class="k">implicitHeight:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="nx">row</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice that both the width and the height must be greater than zero.</p>
<p>When providing an implicit size from the delegate, the tallest delegate of each row and the widest delegate of each column controls the size. This can create interesting behaviour if the width of items depend on the row, or if the height depends on the column. This is because not all delegates are instantiated at all times, so the width of a column might change as the user scrolls through the table.</p>
<p>To avoid the issues with specifying column widths and row heights using implicit delegate sizes, you can provide functions that calculate these sizes. This is done using the <code class="docutils literal notranslate"><span class="pre">columnWidthProvider</span></code> and <code class="docutils literal notranslate"><span class="pre">rowHeightProvider</span></code> . These functions return the size of the width and row respectively as shown below:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">TableView</span> <span class="p">{</span>
    <span class="k">columnWidthProvider:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">column</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="nx">column</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you need to dynamically change the column widths or row heights you must notify the view of this by calling the <code class="docutils literal notranslate"><span class="pre">forceLayout</span></code> method. This will make the view re-calculate the size and position of all cells.</p>
</div>
<div class="section" id="a-model-from-xml">
<h3>7.5.3. A Model from XML<a class="headerlink" href="#a-model-from-xml" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23a-model-from-xml"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>As XML is a ubiquitous data format, QML provides the <code class="docutils literal notranslate"><span class="pre">XmlListModel</span></code> element that exposes XML data as a model. The element can fetch XML data locally or remotely and then processes the data using XPath expressions.</p>
<p>The example below demonstrates fetching images from an RSS flow. The <code class="docutils literal notranslate"><span class="pre">source</span></code> property refers to a remote location over HTTP, and the data is automatically downloaded.</p>
<div class="figure">
<img alt="../_images/xmllistmodel-images.png" src="../_images/xmllistmodel-images.png" />
</div>
<p>When the data has been downloaded, it is processed into model items and roles. The <code class="docutils literal notranslate"><span class="pre">query</span></code> property is an XPath representing the base query for creating model items. In this example, the path is <code class="docutils literal notranslate"><span class="pre">/rss/channel/item</span></code>, so for every item tag, inside a channel tag, inside an RSS tag, a model item is created.</p>
<p>For every model item, a number of roles are extracted. These are represented by <code class="docutils literal notranslate"><span class="pre">XmlRole</span></code> elements. Each role is given a name, which the delegate can access through an attached property. The actual value of each such property is determined through the XPath query for each role. For instance, the <code class="docutils literal notranslate"><span class="pre">title</span></code> property corresponds to the <code class="docutils literal notranslate"><span class="pre">title/string()</span></code> query, returning the contents between the <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;/title&gt;</span></code> tags.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">imageSource</span></code> property extracts the value of an attribute of a tag instead of the contents of the tag. In this case, the <code class="docutils literal notranslate"><span class="pre">url</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">enclosure</span></code> tag is extracted as a string. The <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> is used to indicate that an attribute is requested. The <code class="docutils literal notranslate"><span class="pre">imageSource</span></code> property can then be used directly as the <code class="docutils literal notranslate"><span class="pre">source</span></code> for an <code class="docutils literal notranslate"><span class="pre">Image</span></code> element, which loads the image from the given URL.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="nx">QtQuick</span><span class="p">.</span><span class="nx">XmlListModel</span> <span class="mf">2.0</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">300</span>
    <span class="k">height:</span> <span class="mi">480</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: imageDelegate</span>

        <span class="nx">Box</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">220</span>
            <span class="k">color:</span> <span class="s1">&#39;#333&#39;</span>

            <span class="nx">Column</span> <span class="p">{</span>
                <span class="nx">Text</span> <span class="p">{</span>
                    <span class="k">text:</span> <span class="nx">title</span>
                    <span class="k">color:</span> <span class="s1">&#39;#e0e0e0&#39;</span>
                <span class="p">}</span>
                <span class="nx">Image</span> <span class="p">{</span>
                    <span class="k">width:</span> <span class="nx">listView</span><span class="p">.</span><span class="nx">width</span>
                    <span class="k">height:</span> <span class="mi">200</span>
                    <span class="k">fillMode:</span> <span class="nx">Image</span><span class="p">.</span><span class="nx">PreserveAspectCrop</span>
                    <span class="k">source:</span> <span class="nx">imageSource</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">XmlListModel</span> <span class="p">{</span>
        <span class="kd">id: imageModel</span>

        <span class="k">source:</span> <span class="s2">&quot;https://www.nasa.gov/rss/dyn/image_of_the_day.rss&quot;</span>
        <span class="k">query:</span> <span class="s2">&quot;/rss/channel/item&quot;</span>

        <span class="nx">XmlRole</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;title&quot;</span><span class="p">;</span> <span class="k">query:</span> <span class="s2">&quot;title/string()&quot;</span> <span class="p">}</span>
        <span class="nx">XmlRole</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;imageSource&quot;</span><span class="p">;</span> <span class="k">query:</span> <span class="s2">&quot;enclosure/string(@url)&quot;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="kd">id: listView</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">model:</span> <span class="nx">imageModel</span>
        <span class="k">delegate:</span> <span class="nx">imageDelegate</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="lists-with-sections">
<h3>7.5.4. Lists with Sections<a class="headerlink" href="#lists-with-sections" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23lists-with-sections"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Sometimes, the data in a list can be divided into sections. It can be as simple as dividing a list of contacts into sections under each letter of the alphabet or music tracks under albums. Using a <code class="docutils literal notranslate"><span class="pre">ListView</span></code> it is possible to divide a flat list into categories, providing more depth to the experience.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/listview-sections.png"><img alt="../_images/listview-sections.png" src="../_images/listview-sections.png" style="width: 302.0px; height: 292.0px;" /></a>
</div>
<p>In order to use sections, the <code class="docutils literal notranslate"><span class="pre">section.property</span></code> and <code class="docutils literal notranslate"><span class="pre">section.criteria</span></code> must be set up. The <code class="docutils literal notranslate"><span class="pre">section.property</span></code> defines which property to use to divide the contents into sections. Here, it is important to know that the model must be sorted so that each section consists of continuous elements, otherwise, the same property name might appear in multiple locations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">section.criteria</span></code> can be set to either <code class="docutils literal notranslate"><span class="pre">ViewSection.FullString</span></code> or <code class="docutils literal notranslate"><span class="pre">ViewSection.FirstCharacter</span></code>. The first is the default value and can be used for models that have clear sections, for example, tracks of music albums. The latter takes the first character of a property and means that any property can be used for this. The most common example being the last name of contacts in a phone book.</p>
<p>When the sections have been defined, they can be accessed from each item using the attached properties <code class="docutils literal notranslate"><span class="pre">ListView.section</span></code>, <code class="docutils literal notranslate"><span class="pre">ListView.previousSection</span></code> and <code class="docutils literal notranslate"><span class="pre">ListView.nextSection</span></code>. Using these properties, it is possible to detect the first and last item of a section and act accordingly.</p>
<p>It is also possible to assign a section delegate component to the <code class="docutils literal notranslate"><span class="pre">section.delegate</span></code> property of a <code class="docutils literal notranslate"><span class="pre">ListView</span></code>. This creates a section header delegate which is inserted before any items of a section. The delegate component can access the name of the current section using the attached property <code class="docutils literal notranslate"><span class="pre">section</span></code>.</p>
<p>The example below demonstrates the section concept by showing a list of spacemen sectioned after their nationality. The <code class="docutils literal notranslate"><span class="pre">nation</span></code> is used as the <code class="docutils literal notranslate"><span class="pre">section.property</span></code>. The <code class="docutils literal notranslate"><span class="pre">section.delegate</span></code> component, <code class="docutils literal notranslate"><span class="pre">sectionDelegate</span></code>, shows a heading for each nation, displaying the name of the nation. In each section, the names of the spacemen are shown using the <code class="docutils literal notranslate"><span class="pre">spaceManDelegate</span></code> component.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="s2">&quot;../common&quot;</span>

<span class="nx">Background</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">300</span>
    <span class="k">height:</span> <span class="mi">290</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="nx">spaceMen</span>

        <span class="k">delegate:</span> <span class="nx">spaceManDelegate</span>

        <span class="k">section.property:</span> <span class="s2">&quot;nation&quot;</span>
        <span class="k">section.delegate:</span> <span class="nx">sectionDelegate</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: spaceManDelegate</span>

        <span class="nx">Item</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">20</span>
            <span class="nx">Text</span> <span class="p">{</span>
                <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
                <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
                <span class="k">anchors.leftMargin:</span> <span class="mi">8</span>
                <span class="k">font.pixelSize:</span> <span class="mi">12</span>
                <span class="k">text:</span> <span class="nx">name</span>
                <span class="k">color:</span> <span class="s1">&#39;#1f1f1f&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: sectionDelegate</span>

        <span class="nx">BlueBox</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">20</span>
            <span class="k">text:</span> <span class="nx">section</span>
            <span class="k">fontColor:</span> <span class="s1">&#39;#e0e0e0&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="nx">ListModel</span> <span class="p">{</span>
        <span class="kd">id: spaceMen</span>

        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Abdul Ahad Mohmand&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Afganistan&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Marcos Pontes&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Brazil&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Alexandar Panayotov Alexandrov&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Bulgaria&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Georgi Ivanov&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Bulgaria&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Roberta Bondar&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Marc Garneau&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Chris Hadfield&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Guy Laliberte&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Steven MacLean&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Julie Payette&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Robert Thirsk&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Bjarni Tryggvason&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span> <span class="k">name:</span> <span class="s2">&quot;Dafydd Williams&quot;</span><span class="p">;</span> <span class="k">nation:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-objectmodel">
<h3>7.5.5. The ObjectModel<a class="headerlink" href="#the-objectmodel" title="Permalink to this headline">¶</a></h3>
<p>In some cases you might want to use a list view for a large set of different items. You can solve this using dynamic QML and <code class="docutils literal notranslate"><span class="pre">Loader</span></code>, but another options is to use an <code class="docutils literal notranslate"><span class="pre">ObjectModel</span></code> from the <code class="docutils literal notranslate"><span class="pre">QtQml.Models</span></code> module. The object model is different from other models as it lets you put the actual visual elements side the model. That way, the view does not need any <code class="docutils literal notranslate"><span class="pre">delegate</span></code>.</p>
<div class="figure">
<img alt="../_images/delegates-objectmodel.png" src="../_images/delegates-objectmodel.png" />
</div>
<p>In the example below we put three <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> elements into the <code class="docutils literal notranslate"><span class="pre">ObjectModel</span></code>. However, one rectangle has a <code class="docutils literal notranslate"><span class="pre">Text</span></code> element child while the last one has rounded corners. This would have resulted in a table-style model using something like a <code class="docutils literal notranslate"><span class="pre">ListModel</span></code>. It would also have resulted in empty <code class="docutils literal notranslate"><span class="pre">Text</span></code> elements in the model.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.0</span>
<span class="kr">import</span> <span class="nx">QtQml</span><span class="p">.</span><span class="nx">Models</span> <span class="mf">2.1</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">320</span>
    <span class="k">height:</span> <span class="mi">320</span>
    
    <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#f6f6f6&quot;</span> <span class="p">}</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#d7d7d7&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">ObjectModel</span> <span class="p">{</span>
        <span class="kd">id: itemModel</span>
        
        <span class="nx">Rectangle</span> <span class="p">{</span> <span class="k">height:</span> <span class="mi">60</span><span class="p">;</span> <span class="k">width:</span> <span class="mi">80</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#157efb&quot;</span> <span class="p">}</span>
        <span class="nx">Rectangle</span> <span class="p">{</span> <span class="k">height:</span> <span class="mi">20</span><span class="p">;</span> <span class="k">width:</span> <span class="mi">300</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#53d769&quot;</span> 
            <span class="nx">Text</span> <span class="p">{</span> <span class="k">anchors.centerIn:</span> <span class="nx">parent</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;black&quot;</span><span class="p">;</span> <span class="k">text:</span> <span class="s2">&quot;Hello QML&quot;</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">Rectangle</span> <span class="p">{</span> <span class="k">height:</span> <span class="mi">40</span><span class="p">;</span> <span class="k">width:</span> <span class="mi">40</span><span class="p">;</span> <span class="k">radius:</span> <span class="mi">10</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#fc1a1c&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">10</span>
        <span class="k">spacing:</span> <span class="mi">5</span>
        
        <span class="k">model:</span> <span class="nx">itemModel</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another aspect of the <code class="docutils literal notranslate"><span class="pre">ObjectModel</span></code> is that is can be dynamically populated using the <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">insert</span></code>, <code class="docutils literal notranslate"><span class="pre">move</span></code>, <code class="docutils literal notranslate"><span class="pre">remove</span></code>, and <code class="docutils literal notranslate"><span class="pre">clear</span></code> methods. This way, the contents of the model can be dynamically generated from various sources and still easily shown in a single view.</p>
</div>
<div class="section" id="models-with-actions">
<h3>7.5.6. Models with Actions<a class="headerlink" href="#models-with-actions" title="Permalink to this headline">¶</a></h3>
<p>Since 5.11, the <code class="docutils literal notranslate"><span class="pre">ListElement</span></code> type supports the binding of Javascript functions to properties. This means that you can put functions into a model. This is very useful when building menus with actions and similar constructs.</p>
<p>The example below demonstrates this by having a model of cities that greet you in different ways. The <code class="docutils literal notranslate"><span class="pre">actionModel</span></code> is a model of four cities, but the <code class="docutils literal notranslate"><span class="pre">hello</span></code> property is bound to functions. Each function takes an argument <code class="docutils literal notranslate"><span class="pre">value</span></code>, but you can have any number arguments.</p>
<p>In the delegate <code class="docutils literal notranslate"><span class="pre">actionDelegate</span></code>, the <code class="docutils literal notranslate"><span class="pre">MouseArea</span></code> calls the function <code class="docutils literal notranslate"><span class="pre">hello</span></code> as an ordinary function and this results a call to the corresponding <code class="docutils literal notranslate"><span class="pre">hello</span></code> property in the model.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.11</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="k">width:</span> <span class="mi">120</span>
    <span class="k">height:</span> <span class="mi">300</span>

    <span class="k">gradient:</span> <span class="nx">Gradient</span> <span class="p">{</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">0.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#f6f6f6&quot;</span> <span class="p">}</span>
        <span class="nx">GradientStop</span> <span class="p">{</span> <span class="k">position:</span> <span class="mf">1.0</span><span class="p">;</span> <span class="k">color:</span> <span class="s2">&quot;#d7d7d7&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">ListModel</span> <span class="p">{</span>
        <span class="kd">id: actionModel</span>
        
        <span class="nx">ListElement</span> <span class="p">{</span>
            <span class="k">name:</span> <span class="s2">&quot;Copenhagen&quot;</span>
            <span class="k">hello:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;: You clicked Copenhagen!&quot;</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span>
            <span class="k">name:</span> <span class="s2">&quot;Helsinki&quot;</span>
            <span class="k">hello:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;: Helsinki here!&quot;</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span>
            <span class="k">name:</span> <span class="s2">&quot;Oslo&quot;</span>
            <span class="k">hello:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;: Hei Hei fra Oslo!&quot;</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">ListElement</span> <span class="p">{</span>
            <span class="k">name:</span> <span class="s2">&quot;Stockholm&quot;</span>
            <span class="k">hello:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;: Stockholm calling!&quot;</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ListView</span> <span class="p">{</span>
        <span class="k">anchors.fill:</span> <span class="nx">parent</span>
        <span class="k">anchors.margins:</span> <span class="mi">20</span>

        <span class="k">clip:</span> <span class="kc">true</span>

        <span class="k">model:</span> <span class="nx">actionModel</span>

        <span class="k">delegate:</span> <span class="nx">actionDelegate</span>
        <span class="k">spacing:</span> <span class="mi">5</span>

        <span class="k">focus:</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: actionDelegate</span>

        <span class="nx">Rectangle</span> <span class="p">{</span>
            <span class="k">width:</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span>
            <span class="k">height:</span> <span class="mi">40</span>

            <span class="k">color:</span> <span class="s2">&quot;#157efb&quot;</span>

            <span class="nx">Text</span> <span class="p">{</span>
                <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
                <span class="k">font.pixelSize:</span> <span class="mi">10</span>
                <span class="k">text:</span> <span class="nx">name</span>
            <span class="p">}</span>
            
            <span class="nx">MouseArea</span> <span class="p">{</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                <span class="k">onClicked:</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tuning-performance">
<h3>7.5.7. Tuning Performance<a class="headerlink" href="#tuning-performance" title="Permalink to this headline">¶</a></h3>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23tuning-performance"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>The perceived performance of a view of a model depends very much on the time needed to prepare new delegates. For instance, when scrolling downwards through a ListView, delegates are added just outside the view from the bottom and are removed just as they leave sight over the top of the view. This becomes apparent if the <code class="docutils literal notranslate"><span class="pre">clip</span></code> property is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. If the delegates take too much time to initialize, it will become apparent to the user as soon as the view is scrolled too quickly.</p>
<p>To work around this issue you can tune the margins, in pixels, on the sides of a scrolling view. This is done using the <code class="docutils literal notranslate"><span class="pre">cacheBuffer</span></code> property. In the case described above, vertical scrolling, it will control how many pixels above and below the ListView that will contain prepared delegates. Combining this with asynchronously loading <code class="docutils literal notranslate"><span class="pre">Image</span></code> elements can, for instance, give the images time to load before they are brought into view.</p>
<p>Having more delegates sacrifices memory for a smoother experience and slightly more time to initialize each delegate. This does not solve the problem of complex delegates. Each time a delegate is instantiated, its contents are evaluated and compiled. This takes time, and if it takes too much time, it will lead to a poor scrolling experience. Having many elements in a delegate will also degrade the scrolling performance. It simply costs cycles to move many elements.</p>
<p>To remedy the two latter issues, it is recommended to use <code class="docutils literal notranslate"><span class="pre">Loader</span></code> elements. These can be used to instantiate additional elements when they are needed. For instance, an expanding delegate may use a <code class="docutils literal notranslate"><span class="pre">Loader</span></code> to postpone the instantiation of its detailed view until it is needed. For the same reason, it is good to keep the amount of JavaScript to a minimum in each delegate. It is better to let them call complex pieced of JavaScript that resides outside each delegate. This reduces the time spent compiling JavaScript each time a delegate is created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be aware that using a <code class="docutils literal notranslate"><span class="pre">Loader</span></code> to postpone initialization does just that - it postpones a performance issue. This means that the scrolling performance will be improved, but the actual contents will still take time to appear.</p>
</div>
</div>
</div>
<div class="section" id="summary">
<h2>7.6. Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch06&body=back-link%3A+ch07-modelview%2Fmodelview.html%23summary"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch06&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>In this chapter, we have looked at models, views, and delegates. For each data entry in a model, a view instantiates a delegate visualizing the data. This separates the data from the presentation.</p>
<p>A model can be a single integer, where the <code class="docutils literal notranslate"><span class="pre">index</span></code> variable is provided to the delegate. If a JavaScript array is used as a model, the <code class="docutils literal notranslate"><span class="pre">modelData</span></code> variable represents the data of the current index of the array, while <code class="docutils literal notranslate"><span class="pre">index</span></code> holds the index. For more complex cases, where multiple values need to be provided by each data item, a <code class="docutils literal notranslate"><span class="pre">ListModel</span></code> populated with <code class="docutils literal notranslate"><span class="pre">ListElement</span></code> items is a better solution.</p>
<p>For static models, a <code class="docutils literal notranslate"><span class="pre">Repeater</span></code> can be used as the view. It is easy to combine it with a positioner such as <code class="docutils literal notranslate"><span class="pre">Row</span></code>, <code class="docutils literal notranslate"><span class="pre">Column</span></code>, <code class="docutils literal notranslate"><span class="pre">Grid</span></code> or <code class="docutils literal notranslate"><span class="pre">Flow</span></code> to build user interface parts. For dynamic or large data models, a view such as <code class="docutils literal notranslate"><span class="pre">ListView</span></code>, <code class="docutils literal notranslate"><span class="pre">GridView</span></code>, or <code class="docutils literal notranslate"><span class="pre">TableView</span></code> is more appropriate. These create delegate instances on the fly as they are needed, reducing the number of elements live in the scene at once.</p>
<p>The difference between <code class="docutils literal notranslate"><span class="pre">GridView</span></code> and <code class="docutils literal notranslate"><span class="pre">TableView</span></code> is that the table view expects a table type model with multiple columns of data while the grid view shows a list type model in a grid.</p>
<p>The delegates used in the views can be static items with properties bound to data from the model, or they can be dynamic, with states depending on if they are in focus or not. Using the <code class="docutils literal notranslate"><span class="pre">onAdd</span></code> and <code class="docutils literal notranslate"><span class="pre">onRemove</span></code> signals of the view, they can even be animated as they appear and disappear.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2018 Jürgen Bocklage-Ryannel and Johan Thelin. This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.<br/>
      Last updated on Nov 10, 2020.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46104829-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>